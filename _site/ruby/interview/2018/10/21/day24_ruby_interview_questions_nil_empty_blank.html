<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>30天修煉Ruby面試精選30題 - Day24 nil?, empty? 和, blank? present? 比較? | Ting’s Square.</title>
<meta name="generator" content="Jekyll v3.8.4" />
<meta property="og:title" content="30天修煉Ruby面試精選30題 - Day24 nil?, empty? 和, blank? present? 比較?" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="這一系列精選面試題寫下來，我發現新手工程師對於相似、接近的method或概念都會比較困惑，也難怪熱門面試要考這些題目了！這樣才能鑑別出面試候選人真的有弄懂程式觀念。也希望我整理好的這30篇鐵人賽文章，未來能幫助到許多想學Ruby、進而想找相關工作的新手們！" />
<meta property="og:description" content="這一系列精選面試題寫下來，我發現新手工程師對於相似、接近的method或概念都會比較困惑，也難怪熱門面試要考這些題目了！這樣才能鑑別出面試候選人真的有弄懂程式觀念。也希望我整理好的這30篇鐵人賽文章，未來能幫助到許多想學Ruby、進而想找相關工作的新手們！" />
<link rel="canonical" href="http://localhost:4000/ruby/interview/2018/10/21/day24_ruby_interview_questions_nil_empty_blank.html" />
<meta property="og:url" content="http://localhost:4000/ruby/interview/2018/10/21/day24_ruby_interview_questions_nil_empty_blank.html" />
<meta property="og:site_name" content="Ting’s Square." />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-10-21T08:51:00+09:00" />
<script type="application/ld+json">
{"description":"這一系列精選面試題寫下來，我發現新手工程師對於相似、接近的method或概念都會比較困惑，也難怪熱門面試要考這些題目了！這樣才能鑑別出面試候選人真的有弄懂程式觀念。也希望我整理好的這30篇鐵人賽文章，未來能幫助到許多想學Ruby、進而想找相關工作的新手們！","@type":"BlogPosting","url":"http://localhost:4000/ruby/interview/2018/10/21/day24_ruby_interview_questions_nil_empty_blank.html","headline":"30天修煉Ruby面試精選30題 - Day24 nil?, empty? 和, blank? present? 比較?","dateModified":"2018-10-21T08:51:00+09:00","datePublished":"2018-10-21T08:51:00+09:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/ruby/interview/2018/10/21/day24_ruby_interview_questions_nil_empty_blank.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ting's Square." /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Ting&#39;s Square.</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">30天修煉Ruby面試精選30題 - Day24 nil?, empty? 和, blank? present? 比較?</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2018-10-21T08:51:00+09:00" itemprop="datePublished">Oct 21, 2018
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>這一系列<code class="highlighter-rouge">精選面試題</code>寫下來，我發現新手工程師對於相似、接近的method或概念都會比較困惑，也難怪熱門面試要考這些題目了！這樣才能鑑別出面試候選人真的有弄懂程式觀念。也希望我整理好的這30篇鐵人賽文章，未來能幫助到許多想學Ruby、進而想找相關工作的新手們！</p>

<hr />

<h1 id="ruby經典面試題目-24">Ruby經典面試題目 #24</h1>

<p><code class="highlighter-rouge">Day24 nil?, empty? 和, blank? present? 比較。 what's the difference between nil?, empty?blank? and present? </code></p>

<h1 id="1-nil">1. <code class="highlighter-rouge">nil?</code></h1>

<p>在[Day21]的文章時，我們有討論到<code class="highlighter-rouge">nil</code>這個<code class="highlighter-rouge">虛空</code>的概念。而<code class="highlighter-rouge">nil?</code>是Ruby裡的方法，可以使用在任何物件，用來判斷該物件<code class="highlighter-rouge">是否為nil</code>，若<code class="highlighter-rouge">nil</code>為真，則傳回<code class="highlighter-rouge">true</code>。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kp">nil</span><span class="p">.</span><span class="nf">nil?</span>   <span class="c1"># =&gt; true</span>
<span class="kp">false</span><span class="p">.</span><span class="nf">nil?</span> <span class="c1"># =&gt; false</span>
<span class="kp">true</span><span class="p">.</span><span class="nf">nil?</span>  <span class="c1"># =&gt; false</span>
<span class="s2">""</span><span class="p">.</span><span class="nf">nil?</span>    <span class="c1"># =&gt; false</span>
<span class="s2">" "</span><span class="p">.</span><span class="nf">nil?</span>   <span class="c1"># =&gt; false</span>
<span class="p">[].</span><span class="nf">nil?</span>    <span class="c1"># =&gt; false</span>
<span class="p">{}.</span><span class="nf">nil?</span>    <span class="c1"># =&gt; false</span>
</code></pre></div></div>

<p>以上7行例子，我們可以發現，只有<code class="highlighter-rouge">nil.nil?</code>才會回傳<code class="highlighter-rouge">true</code></p>

<h1 id="2-empty">2. <code class="highlighter-rouge">empty?</code></h1>

<p><code class="highlighter-rouge">empty?</code>也是Ruby的方法，用來檢查<code class="highlighter-rouge">集合Collection</code>是否為空。(It returns true when the object’s length is zero.)</p>

<p>我們可以用<code class="highlighter-rouge">empty?</code>來測試包含：<code class="highlighter-rouge">字串String</code>、<code class="highlighter-rouge">陣列Array</code>、<code class="highlighter-rouge">雜湊Hash</code>和<code class="highlighter-rouge">Set數組</code>是否為空值。</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">" "</span><span class="p">.</span><span class="nf">empty?</span>   <span class="c1"># =&gt; false **字串內有'空白鍵'的值，非空**</span>

<span class="s2">""</span><span class="p">.</span><span class="nf">empty?</span>    <span class="c1"># =&gt; true 空字串</span>
<span class="p">[].</span><span class="nf">empty?</span>    <span class="c1"># =&gt; true 空陣列</span>
<span class="p">{}.</span><span class="nf">empty?</span>    <span class="c1"># =&gt; true 空雜湊</span>
</code></pre></div></div>

<p>另外的集合例子：<code class="highlighter-rouge">Set數組</code>，是我新學到的Ruby概念:)，指的是一組不重複的值是否為空值(a collection of unordered values with no duplicates)。(進一步說明請看<a href="https://ruby-doc.org/stdlib-2.5.3/libdoc/set/rdoc/Set.html">Ruby API 文件</a>)。</p>

<p>我們可以想像去餐廳裡點一個<code class="highlighter-rouge">Set套餐</code>，包含一主食、一甜點、一飲料，其中不會有任何重複的食物。在以下程式碼，記得要在第一行引入<code class="highlighter-rouge">require 'set'</code>，不然會出現<code class="highlighter-rouge">uninitialized constant Set (NameError)</code>：</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'set'</span>

<span class="n">s1</span> <span class="o">=</span> <span class="no">Set</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s1">'c'</span><span class="p">,</span> <span class="ss">:s</span><span class="p">]</span> <span class="c1">#設定一個數組，包含數值、字元、符號</span>
<span class="c1"># =&gt; #&lt;Set: {1, "c", :s}&gt;</span>
<span class="nb">p</span> <span class="n">s1</span><span class="p">.</span><span class="nf">empty?</span>  <span class="c1"># =&gt; false, 此數組非空值</span>

<span class="n">s2</span> <span class="o">=</span> <span class="no">Set</span><span class="p">.</span><span class="nf">new</span>
<span class="nb">p</span> <span class="n">s2</span> <span class="c1">#&lt;Set: {}&gt;</span>
<span class="nb">p</span> <span class="n">s2</span><span class="p">.</span><span class="nf">empty?</span>  <span class="c1"># =&gt; true, 此數組空空如也！</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">empty?</code>就不像前面一開始提到的<code class="highlighter-rouge">nil?</code>可以作用在任何物件了。舉例來說，<code class="highlighter-rouge">True</code>,<code class="highlighter-rouge">False</code>,<code class="highlighter-rouge">Nil</code>這三個<code class="highlighter-rouge">類別class</code>，都不具有<code class="highlighter-rouge">empty?</code>方法：</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">p</span> <span class="kp">true</span><span class="p">.</span><span class="nf">empty?</span>  <span class="c1"># =&gt; NoMethodError: undefined method `empty?' for true:TrueClass</span>

<span class="nb">p</span> <span class="kp">false</span><span class="p">.</span><span class="nf">empty?</span>  
 <span class="c1"># =&gt; NoMethodError: undefined method `empty?' for true:TrueClass</span>

<span class="nb">p</span> <span class="kp">nil</span><span class="p">.</span><span class="nf">empty?</span>
<span class="c1"># NoMethodError: undefined method `empty?' for nil:NilClass</span>
</code></pre></div></div>

<p>此外，<code class="highlighter-rouge">.empty?</code>方法也不能使用在<code class="highlighter-rouge">Enumerable</code>列舉，原因是：我們無法確定傳入的參數迭代後，是否仍具有<code class="highlighter-rouge">非nil</code>的傳回值。 (Not every object which iterates and returns values knows if it has any value to return. [<a href="https://blog.arkency.com/2017/07/nil-empty-blank-ruby-rails-difference/">原文</a>])。</p>

<p>好家在！我在[第20天]曾經有花點時間研究<code class="highlighter-rouge">Enumerable</code>列舉方法的各種可能，<code class="highlighter-rouge">當不能確定元素內值的完整資訊</code>的情況（例如：搜尋不到自己要的字元、字串等）其實還蠻常見的。[<a href="http://ruby-doc.org/core-2.4.2/Enumerable.html">再複習一下Ruby API : Enumerable</a>]</p>

<p>由今天的例子，我明白到一個道理：使用一個工具(method)之前，要明白它的管轄範圍(隸屬於哪個class的method)，不然就好像<code class="highlighter-rouge">提油救火</code>一樣不合時宜唷！</p>

<h1 id="3-blank">3. <code class="highlighter-rouge">blank?</code></h1>

<p>既然<code class="highlighter-rouge">empty?</code>有這麼多使用限制，而可以使用在所有物件的的<code class="highlighter-rouge">nil?</code>又只能確認<code class="highlighter-rouge">nil</code>時為<code class="highlighter-rouge">true</code>，有沒有個各取兩者優勢的好方法呢？</p>

<p>將將將！終於來到我第一個研究Ruby on Rails的方法：<code class="highlighter-rouge">blank?</code>。我們都知道Rails是基於Ruby寫出的框架，所以想必Rails整合許多Ruby的功能，讓寫出網站的動態功能變成更簡潔的事情。</p>

<p><code class="highlighter-rouge">blank?()</code>就是一個結合我們在前面提到的前兩組方法 <code class="highlighter-rouge">nil?</code>與  <code class="highlighter-rouge">empty?</code>（這也是我第一次認真點開Rails文件<a href="https://api.rubyonrails.org/classes/Object.html#method-i-blank-3F">Rails API: blank?()</a>研究~~怎麼有點興奮的港結！！！）</p>

<p>來看看rails在<a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activesupport/lib/active_support/core_ext/object/blank.rb#L19">Github</a>上的程式細節，了解它是怎麼改寫的：</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># File activesupport/lib/active_support/core_ext/object/blank.rb, line 19</span>

<span class="k">def</span> <span class="nf">blank?</span>
  <span class="nb">respond_to?</span><span class="p">(</span><span class="ss">:empty?</span><span class="p">)</span> <span class="p">?</span> <span class="o">!!</span><span class="n">empty?</span> <span class="p">:</span> <span class="o">!</span><span class="nb">self</span> <span class="c1">#是empty或者self是nil，回傳true</span>
<span class="k">end</span>
</code></pre></div></div>

<p>因此，<code class="highlighter-rouge">address.empty? || !address</code></p>

<p>可以寫成：<code class="highlighter-rouge">address.blank?</code></p>

<h2 id="blank為真的情形">blank?()為真的情形</h2>

<p><a href="https://api.rubyonrails.org/classes/Object.html#method-i-blank-3F">Rails API: blank?()</a>裡面提到：</p>

<blockquote>
  <p>An object is blank if it’s false, empty, or a whitespace string.</p>
</blockquote>

<ul>
  <li><code class="highlighter-rouge">nil</code>和<code class="highlighter-rouge">false</code>:是<code class="highlighter-rouge">falsy</code></li>
  <li><code class="highlighter-rouge">""</code>是空字串</li>
  <li><code class="highlighter-rouge">" "</code>是空白鍵</li>
  <li><code class="highlighter-rouge">[]</code>是空陣列</li>
  <li><code class="highlighter-rouge">{}</code>是空雜湊</li>
</ul>

<blockquote>
  <p>They are all blank.</p>
</blockquote>

<p>以Rails程式碼表達如下：</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">false</span><span class="p">,</span>  <span class="s2">""</span><span class="p">,</span> <span class="s2">" "</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}</span> <span class="p">].</span><span class="nf">all?</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:blank?</span><span class="p">)</span> <span class="c1"># =&gt; true</span>
</code></pre></div></div>

<p>我相信大家一定都能理解在製作動態功能網站時類似申請<code class="highlighter-rouge">使用者帳號密碼</code>的場景，密碼字元不能是<code class="highlighter-rouge">nil</code>或<code class="highlighter-rouge">empty</code>。或安插<code class="highlighter-rouge">空白鍵</code>。這在rails裡可以直接整合成<code class="highlighter-rouge">blank?()</code>功能喔（真是太方便了！）</p>

<h1 id="4-present">4. <code class="highlighter-rouge">present?</code></h1>

<p><code class="highlighter-rouge">present?</code>與<code class="highlighter-rouge">blank?</code>就像一對愛唱反調的兄弟一樣，做的剛好是完全相反的事情(An object is present if it’s not blank. [<a href="https://api.rubyonrails.org/classes/Object.html#method-i-present-3F">Rails API</a>)]</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># File activesupport/lib/active_support/core_ext/object/blank.rb, line 26</span>
<span class="k">def</span> <span class="nf">present?</span>
  <span class="o">!</span><span class="n">blank?</span>
<span class="k">end</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">present?</code>從字面上的意思確認是否存在(非<code class="highlighter-rouge">nil</code>且非<code class="highlighter-rouge">空值</code>且非<code class="highlighter-rouge">空白鍵</code>)，<code class="highlighter-rouge">若存在，則回傳True</code>。present?也是專屬Rails的method。</p>

<blockquote>
  <p>present? is also an ActiveSupport extension to Ruby Object and it is the negation of blank?. <a href="https://gist.github.com/pythonicrubyist/8114720">原文</a></p>
</blockquote>

<p>以Rails程式碼表達如下：</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span> <span class="kp">nil</span><span class="p">,</span> <span class="kp">false</span><span class="p">,</span>  <span class="s2">""</span><span class="p">,</span> <span class="s2">" "</span><span class="p">,</span> <span class="p">[],</span> <span class="p">{}</span> <span class="p">].</span><span class="nf">any?</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:present?</span><span class="p">)</span> <span class="c1"># =&gt; false</span>
</code></pre></div></div>

<p>我發現到自己在鐵人賽第10天之後，只要新學到任何Ruby工具(method)，下意識就會馬上去查Ruby Doc看它們屬於哪個類別、以及將Ruby Doc的例子改寫為自己的使用案例…這真是巨大的成長與蛻變！(給自己拍拍手～～)這或許是更有意識地去學習一套新東西的去強迫自己成長的附加價值吧！：）</p>

<p>最後，附上<code class="highlighter-rouge">超級比一比</code>統整表格：</p>

<table>
  <thead>
    <tr>
      <th>nil?</th>
      <th>empty?</th>
      <th>blank?</th>
      <th>present?</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Ruby</td>
      <td>Ruby</td>
      <td>Rails</td>
      <td>Rails</td>
    </tr>
    <tr>
      <td>若物件為<code class="highlighter-rouge">nil</code>，則回傳<code class="highlighter-rouge">true</code></td>
      <td>若<code class="highlighter-rouge">集合</code>(String, Array…etc)的長度為0，則回傳<code class="highlighter-rouge">true</code></td>
      <td>若<code class="highlighter-rouge">nil</code>或<code class="highlighter-rouge">empty</code>或<code class="highlighter-rouge">空白鍵</code>，則回傳<code class="highlighter-rouge">true</code></td>
      <td>若此物件存在(非<code class="highlighter-rouge">nil</code>且非<code class="highlighter-rouge">empty</code>)，則回傳<code class="highlighter-rouge">true</code></td>
    </tr>
  </tbody>
</table>

<p>Ref:</p>

<ul>
  <li><a href="https://blog.arkency.com/2017/07/nil-empty-blank-ruby-rails-difference/">nil?, empty?, blank? in Ruby on Rails - what’s the difference actually?</a></li>
  <li><a href="https://gist.github.com/pythonicrubyist/8114720">Difference between nil?, empty?, blank? and present? in Ruby and Ruby on Rasils.</a></li>
  <li><a href="https://stackoverflow.com/questions/885414/a-concise-explanation-of-nil-v-empty-v-blank-in-ruby-on-rails/888877#888877">A concise explanation of nil v. empty v. blank in Ruby on Rails</a></li>
  <li><a href="https://mgleon08.github.io/blog/2015/12/16/ruby-on-rail-nil-empty-blank-present/">.nil? .empty? .blank? .present? 傻傻分不清楚？</a></li>
  <li><a href="https://blog.csdn.net/u013435984/article/details/53608920">Ruby的.nil? .empty? .blank? .present?差别</a></li>
  <li><a href="https://ruby-doc.org/stdlib-2.5.3/libdoc/set/rdoc/Set.html">Ruby API: Set</a></li>
  <li><a href="https://api.rubyonrails.org/classes/Object.html#method-i-blank-3F">Rails API: blank?</a></li>
  <li><a href="https://api.rubyonrails.org/classes/Object.html#method-i-present-3F">Rails API: present?</a></li>
  <li><a href="https://github.com/rails/rails/blob/fc5dd0b85189811062c85520fd70de8389b55aeb/activesupport/lib/active_support/core_ext/object/blank.rb#L19">Github: rails/activesupport/lib/active_support/core_ext/object/blank.rb</a></li>
</ul>

  </div><a class="u-url" href="/ruby/interview/2018/10/21/day24_ruby_interview_questions_nil_empty_blank.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">Ting&#39;s Square.</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">Ting&#39;s Square.</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"><li><a href="https://github.com/tingtinghsu"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg> <span class="username">tingtinghsu</span></a></li><li><a href="https://www.twitter.com/tingtingtour"><svg class="svg-icon"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg> <span class="username">tingtingtour</span></a></li></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>Copyright Ting Ting Hsu</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
