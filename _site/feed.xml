<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.3">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-10-03T14:09:04+10:00</updated><id>http://localhost:4000/</id><title type="html">Ting’s Square.</title><subtitle>Copyright Ting Ting Hsu</subtitle><entry><title type="html">30天修煉Ruby面試精選30題 - Day18 Ruby裡的多行字串</title><link href="http://localhost:4000/ruby/rails/interview/junior/2018/10/02/day18_ruby_interview_questions_multiline_string.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day18 Ruby裡的多行字串 " /><published>2018-10-02T08:15:00+10:00</published><updated>2018-10-02T08:15:00+10:00</updated><id>http://localhost:4000/ruby/rails/interview/junior/2018/10/02/day18_ruby_interview_questions_multiline_string</id><content type="html" xml:base="http://localhost:4000/ruby/rails/interview/junior/2018/10/02/day18_ruby_interview_questions_multiline_string.html">&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-18&quot;&gt;Ruby經典面試題目 #18&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Day18 如何在Ruby寫下多行字串? How to write multiline string in Ruby?&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;puts多行字串&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;puts&lt;/code&gt;多行字串&lt;/h2&gt;

&lt;p&gt;在Ruby，表達多行字串是很容易的，只要用&lt;code class=&quot;highlighter-rouge&quot;&gt;puts&lt;/code&gt;加上空行(Enter健)即可。立馬來用換行功能吟詩作對一下吧！&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;
那  
達達的馬蹄聲
是個
美麗的錯誤&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;tingdeMacBook&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Air&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Ironman&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tingtinghsu&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ruby&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multiline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rb&lt;/span&gt;

&lt;span class=&quot;err&quot;&gt;那&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;達達的馬蹄聲&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;是個&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;美麗的錯誤&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;嗯嗯恩～好詩！好詩！&lt;/p&gt;

&lt;h2 id=&quot;多行字串&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;%{}&lt;/code&gt;多行字串&lt;/h2&gt;

&lt;p&gt;百分比+大括號符號組合也有相同的多行/斷行功能，而且比單單純純的&lt;code class=&quot;highlighter-rouge&quot;&gt;puts&lt;/code&gt;多了一個好處，就是可以代入變數：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1954&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%{鄭愁予
  &quot;錯誤&quot;
寫於#{year}年}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;鄭愁予&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;錯誤&quot;&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;寫於&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1954&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;年&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;q與q多行字串&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;%Q{}&lt;/code&gt;與&lt;code class=&quot;highlighter-rouge&quot;&gt;%q{}&lt;/code&gt;多行字串&lt;/h2&gt;

&lt;p&gt;我們通常會在&lt;code class=&quot;highlighter-rouge&quot;&gt;%{}&lt;/code&gt;中間加入一個大寫Q，作用是一樣的：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1954&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%Q{鄭愁予
  &quot;錯誤&quot;
寫於&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;年}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;%Q&lt;/code&gt;可以幫我們處理跳脫字元、特殊符號如#、單引號、雙引號的問題。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%Q[ 大寫Q + 中括弧:
  鄭愁予
  &quot;錯誤&quot;
寫於&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;year&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;sx&quot;&gt;年。It's a masterpiece!]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;err&quot;&gt;大寫&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Q&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;中括弧&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;鄭愁予&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;錯誤&quot;&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;寫於&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1954&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;年。&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;It&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;s&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;masterpiece!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;包夾符號其實也可以任意使用大括弧&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;、中括弧&lt;code class=&quot;highlighter-rouge&quot;&gt;[]&lt;/code&gt;，或小括弧&lt;code class=&quot;highlighter-rouge&quot;&gt;()&lt;/code&gt;。（不過慣例上還是&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;較常用呢！）&lt;/p&gt;

&lt;p&gt;換成小寫的&lt;code class=&quot;highlighter-rouge&quot;&gt;%q&lt;/code&gt;試試：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%q(小寫q + 小括弧:
  鄭愁予
  '錯誤'
寫於#{year}年。It's a masterpiece!)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;小寫&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;q&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;小括弧&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;鄭愁予&lt;/span&gt;
  &lt;span class=&quot;s1&quot;&gt;'錯誤'&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;寫於&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#{year}年。It's a masterpiece!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;%q&lt;/code&gt;時，代表年份的變數&lt;code class=&quot;highlighter-rouge&quot;&gt;#{year}&lt;/code&gt;無法被識別。&lt;/p&gt;

&lt;h2 id=&quot;eof多行字串&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;EOF&lt;/code&gt;多行字串&lt;/h2&gt;

&lt;p&gt;還記得我們在[昨天]的文章用&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;&lt;/code&gt;將變數的值改變嗎?&lt;/p&gt;

&lt;p&gt;如果要把這段詩句寫成一個&lt;code class=&quot;highlighter-rouge&quot;&gt;print_poet&lt;/code&gt;方法，我們可以在&lt;code class=&quot;highlighter-rouge&quot;&gt;puts&lt;/code&gt;後面加上 &lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;EOF&lt;/code&gt;以及&lt;code class=&quot;highlighter-rouge&quot;&gt;EOF&lt;/code&gt;做結尾:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print_poet&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
  那  
    達達的馬蹄聲
  是個
    美麗的錯誤
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;print_poet&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;EOF (End of File)&lt;/code&gt;是&lt;code class=&quot;highlighter-rouge&quot;&gt;ruby&lt;/code&gt;從&lt;code class=&quot;highlighter-rouge&quot;&gt;c語言&lt;/code&gt;引進的概念，&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;第一個&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;EOF&lt;/code&gt;：表示把內容當作標準輸入程式&lt;code class=&quot;highlighter-rouge&quot;&gt;stdin (Standard Input)&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;第二個&lt;code class=&quot;highlighter-rouge&quot;&gt;EOF&lt;/code&gt;：表示自己定義的”文字流”（stream）的終止。在以上的例子中，我的文字流是一首詩。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;結果顯示:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;tingdeMacBook&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Air&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Ironman&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tingtinghsu&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ruby&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multiline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rb&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;那&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;達達的馬蹄聲&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;是個&lt;/span&gt;
    &lt;span class=&quot;err&quot;&gt;美麗的錯誤&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我們如果希望&lt;code class=&quot;highlighter-rouge&quot;&gt;def...end方法&lt;/code&gt;內的程式碼也能符合縮排原則，那就來實驗看看將&lt;code class=&quot;highlighter-rouge&quot;&gt;puts &amp;lt;&amp;lt;EOF&lt;/code&gt;前加上縮排，能不能執行：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print_poet&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# syntax error, unexpected end-of-input&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    那  
      達達的馬蹄聲
    是個
      美麗的錯誤
  EOF
end

print_poet #can't find string &quot;EOF&quot; anywhere before EOF
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;燈等！在程式的第二行出現了語法錯誤&lt;code class=&quot;highlighter-rouge&quot;&gt;unexpected end-of-input&lt;/code&gt;。&lt;/p&gt;

&lt;h2 id=&quot;-eof多行字串提供縮排功能&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;-EOF&lt;/code&gt;多行字串，提供縮排功能&lt;/h2&gt;

&lt;p&gt;解法很簡單，如果我們要考慮縮排情形的話，在&lt;code class=&quot;highlighter-rouge&quot;&gt;EOF&lt;/code&gt;年多加上&lt;code class=&quot;highlighter-rouge&quot;&gt;-&lt;/code&gt;減號就行了：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;print_poet&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;EOF&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
    那  
      達達的馬蹄聲
    是個
      美麗的錯誤
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;  EOF&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;後的字串當作變數&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;&lt;/code&gt;後的字串當作變數&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;&lt;/code&gt;後面的大寫字串，也可以用比較好理解的變數名稱（不一定要用EOF）；&lt;/p&gt;

&lt;p&gt;可以進一步用&lt;code class=&quot;highlighter-rouge&quot;&gt;*&lt;/code&gt;做運算:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TimesThree&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
很重要所以說3次!
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;TimesThree&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ruby很有趣吧!&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;很重要所以說&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;次&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;很重要所以說&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;次&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;很重要所以說&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;次&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;或是用&lt;code class=&quot;highlighter-rouge&quot;&gt;+&lt;/code&gt;串接：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;LineOne&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;LineTwo&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
那 達達的馬蹄聲
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;LineOne&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;
是個 美麗的錯誤
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;LineTwo&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果把兩行詩加在一起了：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;那&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;達達的馬蹄聲&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;是個&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;美麗的錯誤&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;string與method合併使用&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;String&lt;/code&gt;與Method合併使用&lt;/h2&gt;

&lt;p&gt;文章最後，我們來實現&lt;code class=&quot;highlighter-rouge&quot;&gt;多行字串&lt;/code&gt;與&lt;code class=&quot;highlighter-rouge&quot;&gt;方法&lt;/code&gt;的結合吧！而且這次要代入2個參數進去：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ironman_log&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;第&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;integer&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;天主題: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;ironman_log&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;multiline&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ironman_log&lt;/code&gt;方法幫我們hightlight今天這篇文章的重點。&lt;/p&gt;

&lt;p&gt;Output:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;第&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;天主題&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multiline&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;那，&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;變數可不可以代入&lt;code class=&quot;highlighter-rouge&quot;&gt;多行字串&lt;/code&gt;呢?&lt;/p&gt;

&lt;p&gt;當然可以～～
&lt;code class=&quot;highlighter-rouge&quot;&gt;多行字串&lt;/code&gt;也是&lt;code class=&quot;highlighter-rouge&quot;&gt;字串&lt;/code&gt;呀！
（就像&lt;code class=&quot;highlighter-rouge&quot;&gt;糖炒栗子&lt;/code&gt;也是&lt;code class=&quot;highlighter-rouge&quot;&gt;栗子🌰&lt;/code&gt;一樣，毋須懷疑）：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;ironman_log&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;POET&lt;/span&gt;&lt;span class=&quot;sh&quot;&gt;

那
  達達的馬蹄聲
  是個
  美麗的錯誤
我
  不是詩人
  是個新手工程師
:)  
&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;POET&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我不是詩人，是個工程師：）&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;tingdeMacBook&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Air&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Ironman&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tingtinghsu&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ruby&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;multiline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rb&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;第&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;18&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;天主題&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;那&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;達達的馬蹄聲&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;是個&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;美麗的錯誤&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;我&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;不是詩人&lt;/span&gt;
  &lt;span class=&quot;err&quot;&gt;是個新手工程師&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;:)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Ref:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.javatpoint.com/ruby-strings&quot;&gt;Ruby Strings : multiline&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html#here_doc&quot;&gt;Ruby Strings&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/2337510/ruby-can-i-write-multi-line-string-with-no-concatenation&quot;&gt;Ruby: Can I write multi-line string with no concatenation?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://emn178.pixnet.net/blog/post/110782417-ruby%E6%95%99%E5%AD%B8---%E5%AD%97%E4%B8%B2%28string%29&quot;&gt;Ruby教學 - 字串(String)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ruby-china.org/topics/25983&quot;&gt;Ruby 多行字符串 heredoc&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.linuxfly.org/post/146/&quot;&gt;使用cat命令和EOF標示輸出多行文件&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">30天修煉Ruby面試精選30題 - Day17 Ruby裡的freeze和frozen?</title><link href="http://localhost:4000/ruby/interview/2018/10/02/day17_ruby_interview_questions_freeze.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day17 Ruby裡的freeze和frozen? " /><published>2018-10-02T08:15:00+10:00</published><updated>2018-10-02T08:15:00+10:00</updated><id>http://localhost:4000/ruby/interview/2018/10/02/day17_ruby_interview_questions_freeze</id><content type="html" xml:base="http://localhost:4000/ruby/interview/2018/10/02/day17_ruby_interview_questions_freeze.html">&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-17&quot;&gt;Ruby經典面試題目 #17&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Day17 解釋Ruby裡的freeze和?frozen。 Explan when to use freeze and frozen in Ruby?&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;在Ruby裡面有一件好玩的事，就是連大寫的常數&lt;code class=&quot;highlighter-rouge&quot;&gt;CONSTANT&lt;/code&gt;也可以修改！來看看下面的例子：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;ROLE_CONSTANT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Rubyist&quot;&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;ROLE_CONSTANT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Ironman&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ROLE_CONSTANT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inspect&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;&amp;lt;&lt;/code&gt;幫我們改變了&lt;code class=&quot;highlighter-rouge&quot;&gt;ROLE_CONSTANT&lt;/code&gt;常數：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;tingdeMacBook&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Air&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Ironman&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tingtinghsu&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ruby&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;freeze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rb&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;RubyistIronman&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;大家對於常數應該要「恆常不變」的印象，竟然都會改變！更別說是一般的變數了：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;variable_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w( string integer array )&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;variable_array&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-add something-&quot;&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;variable_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'hash'&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;variable_array&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果顯示：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;string&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;integer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;array&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;something&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;string&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;integer&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;array&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;hash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;而freeze照字面解釋就是凍結的意思。如果我們要確保某個常數/變數不會被修改，就需要利用到&lt;code class=&quot;highlighter-rouge&quot;&gt;.freeze&lt;/code&gt;方法。&lt;/p&gt;

&lt;h1 id=&quot;freeze-用在常數&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.freeze&lt;/code&gt; 用在常數&lt;/h1&gt;

&lt;p&gt;透過使用&lt;code class=&quot;highlighter-rouge&quot;&gt;.freeze&lt;/code&gt;方法加在常數值之後，我們可以產生真正意義上的常數。讓常數永遠不變(immutable)&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;ROLE_CONSTANT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Rubyist&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;ROLE_CONSTANT&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Bartender&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;ROLE_CONSTANT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inspect&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# can't modify frozen String (RuntimeError)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果硬要修改的話，就會產生&lt;code class=&quot;highlighter-rouge&quot;&gt;RuntimeError&lt;/code&gt;錯誤。&lt;/p&gt;

&lt;h1 id=&quot;freeze-用在變數&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.freeze&lt;/code&gt; 用在變數&lt;/h1&gt;

&lt;p&gt;而變數也一樣，我們想把新值加入已經被freeze的陣列，也會出現&lt;code class=&quot;highlighter-rouge&quot;&gt;RuntimeError&lt;/code&gt;。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w( ice water steam )&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;s1&quot;&gt;'fire'&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#can't modify frozen Array (RuntimeError)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;值得注意的是，雖然陣列不能被改變，但陣列裡的字串&lt;code class=&quot;highlighter-rouge&quot;&gt;string&lt;/code&gt;仍然可以被改變！&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w(ice water steam)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;y&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; [&quot;icy&quot;, &quot;water&quot;, &quot;steam&quot;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Array裡的第一個字串從&lt;code class=&quot;highlighter-rouge&quot;&gt;ice&lt;/code&gt;變成&lt;code class=&quot;highlighter-rouge&quot;&gt;icy&lt;/code&gt;了。為了避免這種&lt;del&gt;狸貓換太子&lt;/del&gt;的事情發生，我們來介紹一個新的方法：&lt;code class=&quot;highlighter-rouge&quot;&gt;.each(&amp;amp;:freeze)&lt;/code&gt;。&lt;/p&gt;

&lt;h1 id=&quot;eachfreeze&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.each(&amp;amp;:freeze)&lt;/code&gt;&lt;/h1&gt;

&lt;p&gt;除了用&lt;code class=&quot;highlighter-rouge&quot;&gt;.freeze&lt;/code&gt;確保陣列無法被改變，也要加入&lt;code class=&quot;highlighter-rouge&quot;&gt;.each(&amp;amp;:freeze)&lt;/code&gt;方法，做好雙重保障，讓陣列裡面的各個值不能被修改。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w(ice water steam)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:freeze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#frozen_array &amp;lt;&amp;lt; 'fire'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;y&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#`[]=': can't modify frozen String (RuntimeError)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;加入&lt;code class=&quot;highlighter-rouge&quot;&gt;.each(&amp;amp;:freeze)&lt;/code&gt;之後，&lt;code class=&quot;highlighter-rouge&quot;&gt;[]=&lt;/code&gt;方法是不是就無法被隨便使用了呢?：）&lt;/p&gt;

&lt;h1 id=&quot;frozen&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.frozen?&lt;/code&gt;&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.frozen?&lt;/code&gt;可以傳回&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;或&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;，幫我們確認凍結是否為真。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;frozen?&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;mapfrozen&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.map(&amp;amp;:frozen?)&lt;/code&gt;&lt;/h1&gt;

&lt;p&gt;如果要檢查集合裡(Array或Hash)的元素是否被freeze，可以使用&lt;code class=&quot;highlighter-rouge&quot;&gt;.map(&amp;amp;:frozen?)&lt;/code&gt;。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:freeze&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:frozen?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt;[true, true, true]&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:frozen?&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# doesn't work! print nothing.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;注意：如果改成&lt;code class=&quot;highlighter-rouge&quot;&gt;.each(&amp;amp;:frozen?)&lt;/code&gt;是無效的。因為我們曾在[第14天]的文章提到，&lt;code class=&quot;highlighter-rouge&quot;&gt;.map&lt;/code&gt;方法會幫我們產生新陣列、放入新值，在以上的例子是放入布林值&lt;code class=&quot;highlighter-rouge&quot;&gt;[true, true, true]&lt;/code&gt;。而&lt;code class=&quot;highlighter-rouge&quot;&gt;.each&lt;/code&gt;不會產生新陣列。&lt;/p&gt;

&lt;h1 id=&quot;使用freeze的效能&quot;&gt;使用freeze的效能&lt;/h1&gt;

&lt;p&gt;提到freeze具有不可變(immutable)的功能，就讓我想起自己在[鐵人賽第七天]文章提到的Symbol符號與String的字串比較。檢查是否可變的最好方式，就是檢查&lt;code class=&quot;highlighter-rouge&quot;&gt;object_id&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w(ice water steam)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;freeze&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;object_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;陣列在記憶體位置裡不改變：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;70243150761140&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;70243150761140&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;70243150761140&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;而如果我們不使用&lt;code class=&quot;highlighter-rouge&quot;&gt;.each(&amp;amp;:freeze)&lt;/code&gt;方法，凍結陣列中的各個元素的話，&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;sx&quot;&gt;%w(ice water steam)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#frozen_array.each(&amp;amp;:freeze) 註解，暫時拿掉方法&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;frozen_array&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;object_id&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;陣列內值的記憶體位置仍然會跑來跑去！&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;70200015881620&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;70200015881420&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;70200015881320&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;70200015881140&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;70200015880960&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;https://blog.honeybadger.io/when-to-use-freeze-and-frozen-in-ruby/&quot;&gt;這篇文章&lt;/a&gt;的Benchmark(標竿測試，讓程式設計者很方便的測量程式的執行時間)，幫我們比較&lt;code class=&quot;highlighter-rouge&quot;&gt;.freeze&lt;/code&gt;和沒有freeze過的變數，結果發現freeze過的變數佔用的記憶體空間少，速度也更快！&lt;/p&gt;

&lt;p&gt;舉例來說，使用在Rails的Route路由頁面，就可以大幅加快網路存取速度。&lt;a href=&quot;http://flats.github.io/blog/2016/01/03/frozen-strings/&quot;&gt;另外這篇文章&lt;/a&gt;也提醒我們，擁抱、並習慣這種以簡單的方式就能優化Ruby效能的寫法唷。：）&lt;/p&gt;

&lt;p&gt;Ref:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.honeybadger.io/when-to-use-freeze-and-frozen-in-ruby/&quot;&gt;When to use freeze and frozen? in Ruby&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://rubylearning.com/satishtalim/ruby_constants.html&quot;&gt;Ruby Constants&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.rubyguides.com/2017/07/ruby-constants/&quot;&gt;Everything You Need to Know About Ruby Constants&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.rubyguides.com/2016/01/ruby-mutability/&quot;&gt;Understanding Mutable Objects &amp;amp; Frozen Strings&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://flats.github.io/blog/2016/01/03/frozen-strings/&quot;&gt;Frozen Strings, Symbols, and Garbage Collection in Ruby&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/4235238/what-is-the-use-or-effect-of-freezing-symbols-and-numbers-in-ruby&quot;&gt;What is the use or effect of freezing Symbols and Numbers in Ruby?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html"></summary></entry><entry><title type="html">30天修煉Ruby面試精選30題 - Day16 iterator 和 loop 比較</title><link href="http://localhost:4000/ruby/interview/2018/10/01/day16_ruby_interview_questions_iterator.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day16 iterator 和 loop 比較" /><published>2018-10-01T08:29:00+10:00</published><updated>2018-10-01T08:29:00+10:00</updated><id>http://localhost:4000/ruby/interview/2018/10/01/day16_ruby_interview_questions_iterator</id><content type="html" xml:base="http://localhost:4000/ruby/interview/2018/10/01/day16_ruby_interview_questions_iterator.html">&lt;p&gt;話說工程師們是一群創新又偷懶的人，能夠只寫一行程式碼，就不用寫兩行。迭代器就是一個能幫助我們達成這個目標的好東西，能把做重複的事情的情況減少到最低，這樣我們就可以省下更多時間去享受人生啦～&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-16&quot;&gt;Ruby經典面試題目 #16&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Day16 什麼是迭代器? 請解釋Ruby裡面有哪幾種迭代器? What's Iterator? How many iterators are there in Ruby?&lt;/code&gt;&lt;/p&gt;

&lt;h1 id=&quot;iterator&quot;&gt;Iterator&lt;/h1&gt;

&lt;p&gt;迭代器 (iterator) 就是用來重複多次相同的事。(Do one thing many times like a loop.)還記得我們在前天的時候提到&lt;code class=&quot;highlighter-rouge&quot;&gt;.each&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;.map&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;.collect&lt;/code&gt;時候，有提到迭代器的概念。今天要來接觸更多的迭代器，在文章後半部會提到相似的迴圈！&lt;/p&gt;

&lt;p&gt;首先從&lt;code class=&quot;highlighter-rouge&quot;&gt;.each&lt;/code&gt;開始複習：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;collection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;variable&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
 &lt;span class=&quot;c1&quot;&gt;#做一些重複的事#&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;範例:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
   &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;鐵人賽第16天了!!&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;err&quot;&gt;鐵人賽第&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;天了&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;鐵人賽第&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;天了&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;鐵人賽第&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;天了&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;!!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這邊的&lt;code class=&quot;highlighter-rouge&quot;&gt;(1...4)&lt;/code&gt;是&lt;code class=&quot;highlighter-rouge&quot;&gt;Range（範圍）&lt;/code&gt;的寫法。&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;(...)&lt;/code&gt;中間有三個點，代表不包含最後一個數字4。（從1到3而已，所以只印了3次）；&lt;/p&gt;

&lt;p&gt;如果是只有兩點的話&lt;code class=&quot;highlighter-rouge&quot;&gt;(..)&lt;/code&gt;，像這樣子&lt;code class=&quot;highlighter-rouge&quot;&gt;(1..4&lt;/code&gt;)就會印4次喔。&lt;/p&gt;

&lt;h2 id=&quot;string-字串迭代器-each_line-iterator&quot;&gt;String: 字串迭代器: each_line iterator&lt;/h2&gt;

&lt;p&gt;Each_line和each的方法類似，都可以利用&lt;code class=&quot;highlighter-rouge&quot;&gt;do...end&lt;/code&gt;或是&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;大括弧的語法，在&lt;code class=&quot;highlighter-rouge&quot;&gt;block&lt;/code&gt;區塊內寫下我們想要程式幫忙重複執行的功能。&lt;code class=&quot;highlighter-rouge&quot;&gt;each_line&lt;/code&gt;可以偵測到空行&lt;code class=&quot;highlighter-rouge&quot;&gt;\n&lt;/code&gt;段落，印出空行：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[成為工程師]&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;專心！&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;堅持！&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;一定可以&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;成功的喔！&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each_line&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;tingdeMacBook&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Air&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Ironman&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tingtinghsu&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ruby&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rb&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;成為工程師&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;專心！&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;堅持！&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;一定可以&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;成功的喔！&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;character-字元迭代器-each_byte-iterator&quot;&gt;Character: 字元迭代器: each_byte iterator&lt;/h2&gt;

&lt;p&gt;除了字串迭代，字元也可以迭代！&lt;code class=&quot;highlighter-rouge&quot;&gt;.each_byte&lt;/code&gt;可以幫我們輕鬆達到這個功能，&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;You can achieve anything you want to&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each_byte&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#block把do end 換成大括弧也可以&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;printf&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;%c &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;printf&lt;/code&gt;使用格式化的字元&lt;code class=&quot;highlighter-rouge&quot;&gt;%c&lt;/code&gt;輸出字串，就和c語言一樣；而&lt;code class=&quot;highlighter-rouge&quot;&gt;print&lt;/code&gt;與&lt;code class=&quot;highlighter-rouge&quot;&gt;puts&lt;/code&gt;的差別在於&lt;code class=&quot;highlighter-rouge&quot;&gt;print&lt;/code&gt;不會幫我們自動換行，&lt;a href=&quot;http://maku77.github.io/ruby/io/print-to-stdout.html&quot;&gt;參考這裡&lt;/a&gt;。（這大概是為什麼&lt;code class=&quot;highlighter-rouge&quot;&gt;puts&lt;/code&gt;比較常見吧！有沒有換行的視覺效果差很多～）&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;tingdeMacBook&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Air&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Ironman&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tingtinghsu&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ruby&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;iterator&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;rb&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;成為工程師&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;專心！&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;堅持！&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;一定可以&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;成功的喔！&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Y&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;v&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;h&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;g&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;u&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;w&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;   &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;o&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tingdeMacBook&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;Air&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:Ironman&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tingtinghsu&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;$&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;信心喊話完成！&lt;/p&gt;

&lt;p&gt;接下來我們要介紹各種迭代器運用在數值變數的情形。為了紀念鐵人賽第16天（進度條超過一半了！）我打算利用各種迭代器印出從1到16的偶數，並在文章的最後與loop迴圈做比較：&lt;/p&gt;

&lt;h2 id=&quot;each-iterator&quot;&gt;each iterator&lt;/h2&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#印出1-16之間的偶數 2 4 6 8 10 12 14 16&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;time-iterator&quot;&gt;time iterator&lt;/h2&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;# #印出0-15之間的偶數 0 2 4 6 8 10 12 14&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;使用&lt;code class=&quot;highlighter-rouge&quot;&gt;.time&lt;/code&gt;方法，&lt;code class=&quot;highlighter-rouge&quot;&gt;i&lt;/code&gt;會從&lt;code class=&quot;highlighter-rouge&quot;&gt;0&lt;/code&gt;開始跑迭代。&lt;/p&gt;

&lt;p&gt;小括號代表的範圍&lt;code class=&quot;highlighter-rouge&quot;&gt;(..)&lt;/code&gt;又出現了！還記得括弧內如果以兩點&lt;code class=&quot;highlighter-rouge&quot;&gt;..&lt;/code&gt;表示，會包含頭與尾的數值嗎?&lt;/p&gt;

&lt;h2 id=&quot;upto-iterator&quot;&gt;upto iterator&lt;/h2&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;upto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#印出1-16之間的偶數 2 4 6 8 10 12 14 16&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;downto-iterator&quot;&gt;downto iterator&lt;/h2&gt;

&lt;p&gt;除了往上數&lt;code class=&quot;highlighter-rouge&quot;&gt;.upto&lt;/code&gt;，iterator也有往下數&lt;code class=&quot;highlighter-rouge&quot;&gt;.downto&lt;/code&gt;的方法：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;downto&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;#印出16-1之間的偶數 16 14 12 10 8 6 4 2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;step-iterator&quot;&gt;step iterator&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.step&lt;/code&gt; iterator就像爬樓梯一樣，一次爬兩格樓梯試試看：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#印出2-16之間的偶數 2 4 6 8 10 12 14 16&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;樓梯可以往上爬也可以往下走:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;step&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#印出16-2之間的偶數 16 14 12 10 8 6 4 2&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;loop&quot;&gt;Loop&lt;/h1&gt;

&lt;p&gt;在挑戰今天的鐵人賽的時候，我發現&lt;code class=&quot;highlighter-rouge&quot;&gt;Loop&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;Iterator&lt;/code&gt;基本上都有類似的功能：&lt;code class=&quot;highlighter-rouge&quot;&gt;重複做相同的事&lt;/code&gt;。來介紹迴圈&lt;code class=&quot;highlighter-rouge&quot;&gt;loop&lt;/code&gt;：&lt;code class=&quot;highlighter-rouge&quot;&gt;for&lt;/code&gt;迴圈， &lt;code class=&quot;highlighter-rouge&quot;&gt;while&lt;/code&gt;，以及While的孿生兄弟&lt;code class=&quot;highlighter-rouge&quot;&gt;until&lt;/code&gt;吧！&lt;/p&gt;

&lt;h2 id=&quot;直接把loop關鍵字加在block之前&quot;&gt;直接把Loop關鍵字加在block之前&lt;/h2&gt;

&lt;p&gt;如果要達成和迭代器，同樣的功能(印出1到16之間的偶數)，Loop該如何進行呢?&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#記得設定初始值!&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#記得加上終止條件&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#印出2-16之間的偶數 2 4 6 8 10 12 14 16&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;光是看到這樣落落長的寫法就覺得很不美觀，換成while試試:&lt;/p&gt;

&lt;h2 id=&quot;while-loop&quot;&gt;while loop&lt;/h2&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#記得設定初始值&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;#印出2-16之間的偶數 2 4 6 8 10 12 14 16&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;until-loop&quot;&gt;until loop&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;until&lt;/code&gt;則剛好是&lt;code class=&quot;highlighter-rouge&quot;&gt;while&lt;/code&gt;的相反，意思是除非條件不符合，否則進行迴圈:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#記得設定初始值&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;until&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;  
  &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;那，Loop迴圈和Iterator迭代器，到底差在哪裡，且孰優孰劣呢?&lt;/p&gt;

&lt;p&gt;如果只是跑單純的Loop話（例如從1加到1百萬），Loop速度會比Iterator快很多。&lt;a href=&quot;https://blog.bater.gq/ruby/2017/11/26/ruby-Iterator-and-which-one-is-faster.html&quot;&gt;參考Bater的文章&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;而&lt;a href=&quot;https://www.codecademy.com/en/forum_questions/5294ba4480ff338cc9002444&quot;&gt;從Codecademy這篇文章&lt;/a&gt;可以了解，Loop一定要包含終止條件。如果你不能確定迴圈的終止條件（必須為&lt;code class=&quot;highlighter-rouge&quot;&gt;true&lt;/code&gt;）就執行迴圈，那無窮迴圈（鬼打牆）的情形就有可能發生。&lt;/p&gt;

&lt;p&gt;舉個例子🌰來說，我在改while loop程式碼以符合我的邏輯（印出1-16之間的偶數）時，不小心把&lt;code class=&quot;highlighter-rouge&quot;&gt;i+=1&lt;/code&gt;放進&lt;code class=&quot;highlighter-rouge&quot;&gt;if條件判斷式&lt;/code&gt;裡，結果程式碼整個當掉（因為i到最後一次執行+1完就大於16了）&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#記得設定初始值&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#這行放錯地方了!&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;#i +=1  應該要放在if...end外才對!&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;因此，記得在while的迴圈之前，必須設定&lt;code class=&quot;highlighter-rouge&quot;&gt;i=1&lt;/code&gt;初始值，且強制讓每次跑完迴圈時，i能夠遞增&lt;code class=&quot;highlighter-rouge&quot;&gt;i+=1&lt;/code&gt;。&lt;/p&gt;

&lt;h2 id=&quot;for-loop&quot;&gt;for loop&lt;/h2&gt;

&lt;p&gt;如果我們不要每次都設定&lt;code class=&quot;highlighter-rouge&quot;&gt;i=1&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;i+=1&lt;/code&gt;（好煩啊而且位置容易擺錯、程式就當掉 XD），可以利用&lt;code class=&quot;highlighter-rouge&quot;&gt;for...end&lt;/code&gt;迴圈，與文章開頭提到的&lt;code class=&quot;highlighter-rouge&quot;&gt;Range(..)&lt;/code&gt;(範圍)的結合：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;..&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;16&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# (1..16)範圍的小括號可省略&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#加入偶數的條件判斷&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;
 &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#印出1-16之間的偶數 2 4 6 8 10 12 14 16&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;最後，為什麼我們要多使用迭代器呢?因為iterator常常和array或是hash結合，加上許多實用的字串方法，幫我們用簡單、優雅的寫法完成複雜的功能：&lt;/p&gt;

&lt;h3 id=&quot;iterator---each寫法&quot;&gt;Iterator - &lt;code class=&quot;highlighter-rouge&quot;&gt;.each&lt;/code&gt;寫法&lt;/h3&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; [2,4,6,8]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;loop---while-用在-array的寫法&quot;&gt;Loop - &lt;code class=&quot;highlighter-rouge&quot;&gt;while&lt;/code&gt; 用在 Array的寫法&lt;/h3&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;while&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;length&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;i&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot; &quot;&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;i&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; 2 4 6 8&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;只要在Array或Hash的結構裡、實現的功能越複雜，iterator就比loop省下更多的程式碼！&lt;/p&gt;

&lt;p&gt;如上述顯示，&lt;code class=&quot;highlighter-rouge&quot;&gt;.each&lt;/code&gt;比起while，僅用了2行程式碼就完成了我們需要的功能。有沒有發現迭代器的強大之處呢？&lt;/p&gt;

&lt;p&gt;每天寫完程式文章，都會發現自己對重要觀念的印象又更加深了！或許這就是鐵人賽的魅力吧：）&lt;/p&gt;

&lt;p&gt;Ref：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://guides.ruby.tw/ruby/iterators.html&quot;&gt;Ruby 使用手冊 - 迭代器 Iterators&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.bater.gq/ruby/2017/11/26/ruby-Iterator-and-which-one-is-faster.html&quot;&gt;Ruby Iterator and which one is faster&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.codecademy.com/en/forum_questions/5294ba4480ff338cc9002444&quot;&gt;Loops vs iterators: I don’t get the difference&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.skorks.com/2009/09/a-wealth-of-ruby-loops-and-iterators/&quot;&gt;A Wealth Of Ruby Loops And Iterators&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">話說工程師們是一群創新又偷懶的人，能夠只寫一行程式碼，就不用寫兩行。迭代器就是一個能幫助我們達成這個目標的好東西，能把做重複的事情的情況減少到最低，這樣我們就可以省下更多時間去享受人生啦～</summary></entry><entry><title type="html">30天修煉Ruby面試精選30題 - Day15 alias 和 alias_method 比較</title><link href="http://localhost:4000/ruby/interview/2018/09/24/day15_ruby_interview_questions_alias_method.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day15 alias 和 alias_method 比較" /><published>2018-09-24T08:56:00+10:00</published><updated>2018-09-24T08:56:00+10:00</updated><id>http://localhost:4000/ruby/interview/2018/09/24/day15_ruby_interview_questions_alias_method</id><content type="html" xml:base="http://localhost:4000/ruby/interview/2018/09/24/day15_ruby_interview_questions_alias_method.html">&lt;p&gt;昨天的文章在研究map和collect的時候，有一句話提到map是collect的別名 (map is an alias for collect)。除了讓我學到alias這個英文單字之外，也意外發現，ruby裡面還有alias方法！今天就來研究alias吧～&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-15&quot;&gt;Ruby經典面試題目 #15&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Day15 alias 和 alias_method比較? What's the difference between alias和 alias_method?&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;alias&quot;&gt;alias&lt;/h2&gt;

&lt;p&gt;幾年前我曾經認養寵物-兩隻可愛的虎斑貓，還記得剛開始認養的時候非常興奮，當時最重要的步驟就是幫可愛的毛小孩取名了！所以我想用程式碼紀念一下當初的過程。
為了命名第一隻貓（一隻底色為白色的虎斑貓），首先我建立Pet類別，定義first_name方法，且此方法的&lt;code class=&quot;highlighter-rouge&quot;&gt;alias&lt;/code&gt;別名是&lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt;（新的別名要放在舊的名稱前面）：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Pet&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;first_name&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Mac&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;first_name&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Method之間不需要放&quot;,&quot;逗號&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Pet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; Mac&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果印出：Mac。這是我家寵物的名字。&lt;/p&gt;

&lt;h2 id=&quot;alias_method&quot;&gt;alias_method&lt;/h2&gt;

&lt;p&gt;如果利用&lt;code class=&quot;highlighter-rouge&quot;&gt;alias_method&lt;/code&gt;寫法也是可以的，只要把name方法前面加上&lt;code class=&quot;highlighter-rouge&quot;&gt;:冒號&lt;/code&gt;，變成&lt;code class=&quot;highlighter-rouge&quot;&gt;Symbol&lt;/code&gt;符號的寫法：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Pet&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;first_name&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Mac&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;kp&quot;&gt;alias_method&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:first_name&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#Symbol之間要加&quot;,&quot;逗號&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Pet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; Mac&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;用&lt;code class=&quot;highlighter-rouge&quot;&gt;alias_method&lt;/code&gt;的優點是可以作用在繼承的類別，來看看例子🌰：&lt;/p&gt;

&lt;p&gt;我家的Mac是一隻調皮的小公貓，有另外一個綽號叫做“麥少爺”。所以我寫了一個類別&lt;code class=&quot;highlighter-rouge&quot;&gt;Cat&lt;/code&gt;繼承自&lt;code class=&quot;highlighter-rouge&quot;&gt;Pet&lt;/code&gt;。在&lt;code class=&quot;highlighter-rouge&quot;&gt;Cat&lt;/code&gt;類別和&lt;code class=&quot;highlighter-rouge&quot;&gt;Pet類別&lt;/code&gt;下都有同名的方法&lt;code class=&quot;highlighter-rouge&quot;&gt;first_name&lt;/code&gt;。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Pet&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;first_name&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Mac&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nickname&lt;/span&gt;
    &lt;span class=&quot;kp&quot;&gt;alias_method&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:first_name&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pet&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;first_name&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;麥少爺&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;nickname&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Cat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; &quot;麥少爺&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;當我們用&lt;code class=&quot;highlighter-rouge&quot;&gt;Cat.new.name&lt;/code&gt;產生一個新物件，程式會走一遍&lt;code class=&quot;highlighter-rouge&quot;&gt;Cat&lt;/code&gt;類別，到了&lt;code class=&quot;highlighter-rouge&quot;&gt;nickname&lt;/code&gt;這個方法，會跑去繼承父類別&lt;code class=&quot;highlighter-rouge&quot;&gt;Pet&lt;/code&gt;的&lt;code class=&quot;highlighter-rouge&quot;&gt;self.nickname&lt;/code&gt;方法。&lt;/p&gt;

&lt;p&gt;尋找到&lt;code class=&quot;highlighter-rouge&quot;&gt;alias_method&lt;/code&gt;之後，呼叫&lt;code class=&quot;highlighter-rouge&quot;&gt;name&lt;/code&gt;別名的舊名&lt;code class=&quot;highlighter-rouge&quot;&gt;:cat_name&lt;/code&gt;，再回來&lt;code class=&quot;highlighter-rouge&quot;&gt;Cat&lt;/code&gt;類別跑完執行&lt;code class=&quot;highlighter-rouge&quot;&gt;first_name&lt;/code&gt;方法。&lt;/p&gt;

&lt;p&gt;此時Mac的花名出現啦！叫做&lt;code class=&quot;highlighter-rouge&quot;&gt;麥少爺&lt;/code&gt;。&lt;/p&gt;

&lt;h2 id=&quot;alias_method與alias的不同&quot;&gt;alias_method與alias的不同&lt;/h2&gt;

&lt;p&gt;如果把上述程式碼轉為&lt;code class=&quot;highlighter-rouge&quot;&gt;alias&lt;/code&gt;試試看，幫我的第二隻貓：Dell設定綽號。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Pet&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;second_name&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Dell&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;nickname&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;alias&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;second_name&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Cat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Pet&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;second_name&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;戴公子&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;nickname&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;Cat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; Dell&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Cat.new.name&lt;/code&gt; 呼叫&lt;code class=&quot;highlighter-rouge&quot;&gt;nickname&lt;/code&gt;方法後，並沒有出現別名&lt;code class=&quot;highlighter-rouge&quot;&gt;戴公子&lt;/code&gt;，名字仍為&lt;code class=&quot;highlighter-rouge&quot;&gt;Dell&lt;/code&gt;。
這是因為&lt;code class=&quot;highlighter-rouge&quot;&gt;alias&lt;/code&gt;只會尋找其關鍵字存在的scope，在本案例裡是&lt;code class=&quot;highlighter-rouge&quot;&gt;Pet&lt;/code&gt;類別裡面的&lt;code class=&quot;highlighter-rouge&quot;&gt;second_name&lt;/code&gt;方法。&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;alias_method&lt;/code&gt;在Ruby on Rails專案很常使用，因為它可以幫我們把功能重複的方法、透過重新改寫方法名的過程，整合到一起。（未來熟悉Rails後會補上例子，敬請期待）&lt;/p&gt;

&lt;p&gt;透過這兩個為小貓取花名的舉例的比較，希望大家能夠更了解&lt;code class=&quot;highlighter-rouge&quot;&gt;alias&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;alias_method&lt;/code&gt;的不同喔！&lt;/p&gt;

&lt;p&gt;比一比：&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;a href=&quot;http://ruby-doc.org/stdlib-1.9.1/libdoc/rdoc/rdoc/RDoc/Alias.html&quot;&gt;alias&lt;/a&gt;&lt;/th&gt;
      &lt;th&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.1.5/Module.html#method-i-alias_method&quot;&gt;alias_method&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;在libdoc之下的RDoc裡的關鍵字&lt;/td&gt;
      &lt;td&gt;屬於Module模組方法&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;只會作用在關鍵字所屬的scope&lt;/td&gt;
      &lt;td&gt;可以重新定義方法，較為彈性&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;Ref：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://ruby-china.org/topics/13272&quot;&gt;一份Ruby面試題&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.bigbinary.com/2012/01/08/alias-vs-alias-method.html&quot;&gt;alias vs alias_method&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ernie.io/2014/10/23/in-defense-of-alias/&quot;&gt;In Defense of Alias&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/4763121/should-i-use-alias-or-alias-method&quot;&gt;Should I use alias or alias_method?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://wikimatze.de/method-alias-in-ruby/&quot;&gt;Method alias in ruby&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/stdlib-1.9.1/libdoc/rdoc/rdoc/RDoc/Alias.html&quot;&gt;Ruby-doc.org : alias&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Module.html#method-i-alias_method&quot;&gt;Ruby-doc.org : alias method&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">昨天的文章在研究map和collect的時候，有一句話提到map是collect的別名 (map is an alias for collect)。除了讓我學到alias這個英文單字之外，也意外發現，ruby裡面還有alias方法！今天就來研究alias吧～</summary></entry><entry><title type="html">30天修煉Ruby面試精選30題 - Day14 each, map 和 collect 比較</title><link href="http://localhost:4000/ruby/interview/2018/09/23/day14_ruby_interview_questions_each_map_collect.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day14 each, map 和 collect 比較 " /><published>2018-09-23T08:30:00+10:00</published><updated>2018-09-23T08:30:00+10:00</updated><id>http://localhost:4000/ruby/interview/2018/09/23/day14_ruby_interview_questions_each_map_collect</id><content type="html" xml:base="http://localhost:4000/ruby/interview/2018/09/23/day14_ruby_interview_questions_each_map_collect.html">&lt;p&gt;今天要講的是迭代器(iterator)，迭代器會一個一個地傳回集合裡的元素，讓我們可以利用迭代方法做重複的事。在Ruby裡的&lt;code class=&quot;highlighter-rouge&quot;&gt;collection&lt;/code&gt;集合裡有&lt;code class=&quot;highlighter-rouge&quot;&gt;Array&lt;/code&gt;陣列和&lt;code class=&quot;highlighter-rouge&quot;&gt;Hash&lt;/code&gt;雜湊。今天要介紹三種用在集合的迭代器分別叫，&lt;code class=&quot;highlighter-rouge&quot;&gt;each&lt;/code&gt;，&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;collect&lt;/code&gt;，這也是常見的Ruby面試考題呢！&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-14&quot;&gt;Ruby經典面試題目 #14&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Day14 each, map 和 collect 比較? What's the difference between each, map and collect?&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;我們來用這三種迭代器，在Array和Hash兩種集合裡面各舉例子：&lt;/p&gt;

&lt;h1 id=&quot;array&quot;&gt;Array&lt;/h1&gt;

&lt;h2 id=&quot;arrayeach&quot;&gt;Array#each&lt;/h2&gt;

&lt;p&gt;最近我在進行旅行存錢計劃。我有三個銀行帳戶，NAB, CAN, 和WESTPAC，開戶金額分別為100,200,300。所以我寫一個陣列集合放入初始金額。&lt;/p&gt;

&lt;p&gt;假設我打算開始從本週開始在每個帳戶存入50元，本週+50元。我們可以在陣列後加上&lt;code class=&quot;highlighter-rouge&quot;&gt;.each&lt;/code&gt;方法：（注意：&lt;code class=&quot;highlighter-rouge&quot;&gt;puts&lt;/code&gt;寫在&lt;code class=&quot;highlighter-rouge&quot;&gt;block&lt;/code&gt;大括號裡）&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果列出各個帳戶的金額：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;150&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;250&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;350&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;經過&lt;code class=&quot;highlighter-rouge&quot;&gt;.each&lt;/code&gt;方法作用之後，只會分別印出同一陣列中各個元素的值，不會產生新陣列。&lt;/p&gt;

&lt;h2 id=&quot;arraycollect&quot;&gt;Array#collect&lt;/h2&gt;

&lt;p&gt;以上案例，換成&lt;code class=&quot;highlighter-rouge&quot;&gt;.collect&lt;/code&gt;試試看：（注意！puts擺在前面）&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;collect&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.collect&lt;/code&gt;會幫我們把結果放入新的陣列。結果印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;150&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;350&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;arraymap&quot;&gt;Array#map&lt;/h2&gt;

&lt;p&gt;同樣的，&lt;code class=&quot;highlighter-rouge&quot;&gt;.map&lt;/code&gt;方法也會幫我們產生新的陣列。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;150&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;250&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;350&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;那&lt;code class=&quot;highlighter-rouge&quot;&gt;.collect&lt;/code&gt;與&lt;code class=&quot;highlighter-rouge&quot;&gt;.map&lt;/code&gt;又有什麼不同？以及分別用在什麼情況呢？這時候就要翻查Ruby手冊裡，關於&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Array.html#method-i-collect&quot;&gt;.collect&lt;/a&gt;和&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-map&quot;&gt;.map&lt;/a&gt;的介紹了:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;collect { |item| block } → new_ary&lt;/code&gt; Invokes the given block once for each element of self. Creates a new array containing the values returned by the block.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;hmm…好像看不出有什麼差異呢！&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;map { |obj| block } → array&lt;/code&gt; Returns a new array with the results of running block once for every element in enum.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;近一步查詢&lt;a href=&quot;https://stackoverflow.com/questions/9429034/what-is-the-difference-between-map-each-and-collect&quot;&gt;stackoverflow&lt;/a&gt;map是collect的別名 (map is an alias for collect)，實務上，比較常使用&lt;code class=&quot;highlighter-rouge&quot;&gt;map&lt;/code&gt;喔！&lt;/p&gt;

&lt;h2 id=&quot;更多arraymap用法&quot;&gt;更多Array#map用法&lt;/h2&gt;

&lt;p&gt;我想把我的銀行帳戶陣列放進account變數，再用&lt;code class=&quot;highlighter-rouge&quot;&gt;.inspect&lt;/code&gt;檢查陣列的值：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;account&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inspect&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果印出&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[100, 200, 300]&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果在&lt;code class=&quot;highlighter-rouge&quot;&gt;.map&lt;/code&gt;後加上驚嘆號&lt;code class=&quot;highlighter-rouge&quot;&gt;.map!&lt;/code&gt;呢?&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map!&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;inspect&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;存進去原本的陣列了。錢錢變多了！開心～～（加上!的方法，代表原本的物件會被改變）&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;[150, 250, 350]&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;hash&quot;&gt;Hash&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Hash&lt;/code&gt;雜湊是一對&lt;code class=&quot;highlighter-rouge&quot;&gt;key&lt;/code&gt;與&lt;code class=&quot;highlighter-rouge&quot;&gt;value&lt;/code&gt;的集合。在剛剛的銀行帳戶例子裡，我們可以把&lt;code class=&quot;highlighter-rouge&quot;&gt;銀行名稱&lt;/code&gt;當作&lt;code class=&quot;highlighter-rouge&quot;&gt;索引&lt;/code&gt;，&lt;code class=&quot;highlighter-rouge&quot;&gt;存款數目&lt;/code&gt;當作&lt;code class=&quot;highlighter-rouge&quot;&gt;值&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;account&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;NAB&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;CAN&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;WEST&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;利用雜湊來展現，這樣就可讀性更加清楚了。&lt;/p&gt;

&lt;h2 id=&quot;hasheach&quot;&gt;Hash#each&lt;/h2&gt;

&lt;p&gt;現在我想要計算三個帳戶加總共有多少錢，以&lt;code class=&quot;highlighter-rouge&quot;&gt;.each&lt;/code&gt;的方式可寫為：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;mymoney&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bankname&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;saving&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mymoney&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;saving&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#把索引和值列出&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;My Money: $ &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mymoney&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;或是&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;mymoney&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#設定初始值&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mymoney&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#依序加總bank集合裡第二個元素bank[1]&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;My Money: $ &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mymoney&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果都會印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;My&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;hashmap&quot;&gt;Hash#map&lt;/h2&gt;

&lt;p&gt;在Hash裡，把&lt;code class=&quot;highlighter-rouge&quot;&gt;.each&lt;/code&gt;換成&lt;code class=&quot;highlighter-rouge&quot;&gt;.map&lt;/code&gt;或是&lt;code class=&quot;highlighter-rouge&quot;&gt;.collect&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;mymoney&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#設定初始值&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;account&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;collect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mymoney&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#依序加總bank集合裡第二個元素bank[1]&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;print&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;My Money: $ &quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;mymoney&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;to_s&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果都是一樣的：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;My&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Money&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;$&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;600&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;hashmap-結合-arrayeach-與-arraymap&quot;&gt;Hash#map 結合 Array#each 與 Array#map&lt;/h2&gt;

&lt;p&gt;現在要進階到一個較為複雜的例子：&lt;code class=&quot;highlighter-rouge&quot;&gt;hash&lt;/code&gt;裡包含&lt;code class=&quot;highlighter-rouge&quot;&gt;索引&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;值&lt;/code&gt;兩部份，那我們可不可以把&lt;code class=&quot;highlighter-rouge&quot;&gt;陣列&lt;/code&gt;當作值放在裡面呢？當然可以！&lt;/p&gt;

&lt;p&gt;假設我的NAB銀行下有2個子帳戶，CAN銀行下有3個子帳戶，分別放入這些資產：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;NAB&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Cash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Gold&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;CAN&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Bitcoin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Litecoin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Ethereum&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;利用&lt;code class=&quot;highlighter-rouge&quot;&gt;hash.map&lt;/code&gt;會產生一個新的陣列：(進一步了解看&lt;a href=&quot;https://stackoverflow.com/questions/16281983/hash-map-method&quot;&gt;這裡&lt;/a&gt;)&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果顯示：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;NAB&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Cash&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Gold&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]],&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;CAN&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Bitcoin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Litecoin&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Ethereum&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]]]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#我有好多帳戶!NAB下有2個，CAN下有3個&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我想分別提取出&lt;code class=&quot;highlighter-rouge&quot;&gt;銀行:帳戶名稱&lt;/code&gt;的這一對資訊，並且用逗號&lt;code class=&quot;highlighter-rouge&quot;&gt;.join(&quot;, &quot;)&lt;/code&gt;隔開。&lt;/p&gt;

&lt;p&gt;為了程式可讀性，&lt;code class=&quot;highlighter-rouge&quot;&gt;hash&lt;/code&gt;的&lt;code class=&quot;highlighter-rouge&quot;&gt;索引&lt;/code&gt;命名為&lt;code class=&quot;highlighter-rouge&quot;&gt;bank&lt;/code&gt;(銀行名)，&lt;code class=&quot;highlighter-rouge&quot;&gt;值&lt;/code&gt;為&lt;code class=&quot;highlighter-rouge&quot;&gt;account_arry&lt;/code&gt;(放了不同數目的子帳戶陣列)。在走&lt;code class=&quot;highlighter-rouge&quot;&gt;account_arry.each&lt;/code&gt;展開陣列迭代器時，每在集合裡走完一個元素，就印出&lt;code class=&quot;highlighter-rouge&quot;&gt;#{bank}: #{sub_account}&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_arry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_arry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sub_account&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sub_account&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;, &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果僅印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Cash, Gold, Bitcoin, Litecoin, Ethereum&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;奇怪，這不是我要的結果呀！我很希望帳戶前面能顯示出銀行名稱呢！&lt;/p&gt;

&lt;p&gt;這是因為剛剛說過，&lt;code class=&quot;highlighter-rouge&quot;&gt;arry.each&lt;/code&gt;會回傳&lt;strong&gt;陣列本身&lt;/strong&gt;，在這個例子🌰裡，分別回傳的是&lt;code class=&quot;highlighter-rouge&quot;&gt;[&quot;Cash&quot;, &quot;Gold&quot;]&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;[&quot;Bitcoin&quot;, &quot;Litecoin&quot;, &quot;Ethereum&quot;]&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;改成&lt;code class=&quot;highlighter-rouge&quot;&gt;.map&lt;/code&gt;試試看：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_arry&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;account_arry&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sub_account&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bank&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sub_account&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;, &quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果顯示為：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;NAB: Cash, NAB: Gold, CAN: Bitcoin, CAN: Litecoin, CAN: Ethereum&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這是因為&lt;code class=&quot;highlighter-rouge&quot;&gt;account_arry.map&lt;/code&gt;自動幫我們產生新的陣列，放進&lt;code class=&quot;highlighter-rouge&quot;&gt;bank&lt;/code&gt;與對應的&lt;code class=&quot;highlighter-rouge&quot;&gt;sub_account&lt;/code&gt;並回傳。&lt;/p&gt;

&lt;p&gt;最後放個小小的比較作為總結，祝福大家collect不同的資產，不管是有形的財富、還是無形的知識，最後都可以達成錢多多的心願喔！&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;each&lt;/th&gt;
      &lt;th&gt;map / collect&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Array方法&lt;/td&gt;
      &lt;td&gt;Enumerable(列舉)方法&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;回傳Array本身&lt;/td&gt;
      &lt;td&gt;產生新的Array並回傳&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;Ref：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.toptal.com/ruby/interview-questions&quot;&gt;21 Essential Ruby Interview Questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/5347949/whats-different-between-each-and-collect-method-in-ruby&quot;&gt;what’s different between each and collect method in Ruby&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/5254128/arrayeach-vs-arraymap&quot;&gt;Array#each vs. Array#map&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Array.html#method-i-collect&quot;&gt;Ruby-doc.org : collect&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-map&quot;&gt;Ruby-doc.org : map&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Hash.html#method-i-each&quot;&gt;Ruby-doc.org : hash#each&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://stackoverflow.com/questions/16281983/hash-map-method&quot;&gt;Hash.map method&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">今天要講的是迭代器(iterator)，迭代器會一個一個地傳回集合裡的元素，讓我們可以利用迭代方法做重複的事。在Ruby裡的collection集合裡有Array陣列和Hash雜湊。今天要介紹三種用在集合的迭代器分別叫，each，map和collect，這也是常見的Ruby面試考題呢！</summary></entry><entry><title type="html">30天修煉Ruby面試精選30題 - Day13 instance_eval 和 class_eval 的差別</title><link href="http://localhost:4000/ruby/interview/2018/09/22/day13_ruby_interview_questions_class_instance_eval.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day13 instance_eval 和 class_eval 的差別 " /><published>2018-09-22T08:15:00+10:00</published><updated>2018-09-22T08:15:00+10:00</updated><id>http://localhost:4000/ruby/interview/2018/09/22/day13_ruby_interview_questions_class_instance_eval</id><content type="html" xml:base="http://localhost:4000/ruby/interview/2018/09/22/day13_ruby_interview_questions_class_instance_eval.html">&lt;p&gt;第13天! 昨天談到了class variable, class instance variable和instance variable，也發現在實務上，類別實體變數和實體變數才是主流。今天我們要多談兩個跟前一篇的變數有關的方法:&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;class_eval&lt;/code&gt;。讓每天都主題都環環相扣！&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-13&quot;&gt;Ruby經典面試題目 #13&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval 和 class_eval 的差別 ? What's the difference between instance_eval and class_eval?&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;由過去幾天的寫作經驗，我發現一篇文章的開頭最難下筆、也是最重要的，舉例🌰能讓自己懂（&lt;del&gt;還有讓我的讀者、觀眾、加油群啦啦隊懂&lt;/del&gt;）更不是容易的事。此篇文章由實體變數開始會能夠循序漸進，所以就從&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt;切入吧！&lt;/p&gt;

&lt;h2 id=&quot;instance_eval&quot;&gt;instance_eval&lt;/h2&gt;

&lt;p&gt;昨天文章提到一個重要概念：能夠讀取變數的屬性是非常重要的，讓我們可以更方便的讀取名稱相同，但其實值不同的物件。&lt;/p&gt;

&lt;p&gt;讓我們把昨天的&lt;code class=&quot;highlighter-rouge&quot;&gt;attr_accessor&lt;/code&gt;概念引入，馬上來寫程式碼實驗&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt;：&lt;/p&gt;

&lt;h3 id=&quot;instance_eval案例1attr_accessor&quot;&gt;[instance_eval案例1:attr_accessor]&lt;/h3&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunMarathon&lt;/span&gt;
 &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:km&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 21 和hm.km的結果相同&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 42 和fm.km的結果相同&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#[:km=, :km]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我們創了&lt;code class=&quot;highlighter-rouge&quot;&gt;RunMarathon&lt;/code&gt;類別，new出兩個物件&lt;code class=&quot;highlighter-rouge&quot;&gt;hm&lt;/code&gt;半程馬拉松和&lt;code class=&quot;highlighter-rouge&quot;&gt;fm&lt;/code&gt;全程馬拉松並各自指定對應的&lt;code class=&quot;highlighter-rouge&quot;&gt;km&lt;/code&gt;公里數值。這裡用到兩個&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_methods&lt;/code&gt;實體方法&lt;code class=&quot;highlighter-rouge&quot;&gt;km=&lt;/code&gt;(寫入值)和&lt;code class=&quot;highlighter-rouge&quot;&gt;km&lt;/code&gt;(讀出值)。再用&lt;code class=&quot;highlighter-rouge&quot;&gt;.instance_eval&lt;/code&gt;顯示值。結果印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunMarathon:0x000055f60ed4f0d0 @km=21&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunMarathon:0x000055f60ed4f0a8 @km=42&amp;gt;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:km&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;很好！成功用&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt;印出值了！&lt;/p&gt;

&lt;h3 id=&quot;instance_eval案例2-只用initialize方法&quot;&gt;[instance_eval案例2: 只用initialize()方法]&lt;/h3&gt;

&lt;p&gt;如果我們把程式碼改為在&lt;code class=&quot;highlighter-rouge&quot;&gt;RunMarathon&lt;/code&gt;類別加入&lt;code class=&quot;highlighter-rouge&quot;&gt;initialize()&lt;/code&gt;方法，讓我們在new出物件的同時傳入公里數，程式碼變成如下：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunMarathon&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;  
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 21 和hm.km的結果相同&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 42 和fm.km的結果相同&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#[:km]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我們可以從&lt;code class=&quot;highlighter-rouge&quot;&gt;.instance_methods&lt;/code&gt;看到方法只剩下讀取&lt;code class=&quot;highlighter-rouge&quot;&gt;:km&lt;/code&gt;，另一個實體方法&lt;code class=&quot;highlighter-rouge&quot;&gt;k=&lt;/code&gt;已經不見了：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunMarathon:0x000055c2a0e3eac8 @km=21&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunMarathon:0x000055c2a0e3eaa0 @km=42&amp;gt;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;以上觀念是把昨天+今天的一起整合複習。&lt;/p&gt;

&lt;h3 id=&quot;instance_eval案例3-只用initialize方法但將def-km方法刪除&quot;&gt;[instance_eval案例3: 只用initialize()方法，但將&lt;code class=&quot;highlighter-rouge&quot;&gt;def km&lt;/code&gt;方法刪除]&lt;/h3&gt;

&lt;p&gt;如果，我們把&lt;code class=&quot;highlighter-rouge&quot;&gt;RunMarathon&lt;/code&gt;class的定義公里變數方法:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;移除，會發生什麼事呢？&lt;/p&gt;

&lt;p&gt;（我想你應該猜到了，跟&lt;code class=&quot;highlighter-rouge&quot;&gt;hm.km&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;hm.fm&lt;/code&gt;有關：）&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunMarathon&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#p hm.km #undefined method `km' (NoMethodError)&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#p fm.km #undefined method `km' (NoMethodError)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#[]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;沒有方法了。&lt;code class=&quot;highlighter-rouge&quot;&gt;hm.km&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;hm.fm&lt;/code&gt;找不到方法(NoMethodError)。我們用註解&lt;code class=&quot;highlighter-rouge&quot;&gt;#&lt;/code&gt;消去無用的這兩行。&lt;/p&gt;

&lt;p&gt;然而&lt;code class=&quot;highlighter-rouge&quot;&gt;.instance_eval&lt;/code&gt;如往常一樣堅守崗位幫我們印出值。
而&lt;code class=&quot;highlighter-rouge&quot;&gt;.instance_methods&lt;/code&gt;的印出結果顯示出，此時我們並沒有用到任何的實體方法。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunMarathon:0x000055cb6e5142f0 @km=21&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunMarathon:0x000055cb6e5142c8 @km=42&amp;gt;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;為了更近一步了解，我去&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Module.html#method-i-class_eval&quot;&gt;Ruby-doc.org&lt;/a&gt;查到這段話：&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt; evaluates a string containing Ruby source code, or the given block, within the context of the receiver (obj). In order to set the context, the variable self is set to obj while the code is executing, giving the code access to obj’s instance variables and private methods. &lt;a href=&quot;http://ruby-doc.org/core-2.5.1/BasicObject.html#method-i-instance_eval&quot;&gt;出處&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;我發現&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt;用來定義於任何的object(包含class，因為類別也是一種物件)，還可以存取到私有方法&lt;code class=&quot;highlighter-rouge&quot;&gt;private method&lt;/code&gt;！立馬來寫code研究一下。&lt;/p&gt;

&lt;p&gt;話說在我心深處藏了一個人生願望：跑超級馬拉松(ultramarathon，公里數超過50以上的馬拉松)，因此我決定把這個內心秘密放在&lt;code class=&quot;highlighter-rouge&quot;&gt;private method&lt;/code&gt;裡：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunMarathon&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;kp&quot;&gt;private&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;my_resolution&lt;/span&gt;
  &lt;span class=&quot;s2&quot;&gt;&quot;I'm going to run ultrathon &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; in the future!&quot;&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;um&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;um&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;um&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;um&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;my_resolution&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果顯示為：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunMarathon:0x0000564cf8966b58 @km=100&amp;gt;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;I'm going to run ultrathon 100 in the future!&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;利用&lt;code class=&quot;highlighter-rouge&quot;&gt;.instance_eval{private method}&lt;/code&gt;探尋內心深處，好熱血的人生宣言啊～&lt;/p&gt;

&lt;h2 id=&quot;class_eval&quot;&gt;class_eval&lt;/h2&gt;

&lt;p&gt;如果我們想要提取值很多次，又不想一直重複寫這樣的程式碼：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#告訴我半馬公里數！&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#告訴我全馬公里數！&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;um&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_eval&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#告訴我超馬公里數！&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我們可以加入&lt;code class=&quot;highlighter-rouge&quot;&gt;class_eval&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunMarathon&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_eval&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#放RunMarathon類別的外面！定義新的類別方法&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#這個是類別實體變數唷！&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#21 與hm.instance_eval {@km} 值相同&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#42 與fm.instance_eval {@km} 值相同&lt;/span&gt;


&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#[:km]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;程式碼運行如下：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunMarathon:0x00005619eeb8ec88 @km=21&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunMarathon:0x00005619eeb8ec60 @km=42&amp;gt;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;ss&quot;&gt;:km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;瞧！是不是跟[&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval案例2: 只用initialize()方法&lt;/code&gt;]這裡所舉的例子一。模。一。樣！&lt;/p&gt;

&lt;p&gt;為什麼&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunMarathon&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;no&quot;&gt;RunMarathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_eval&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#放外面！定義類別方法&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#這個是類別實體變數唷！&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;和&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunMarathon&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;km&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;  
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;會出現相同的結果呢？&lt;/p&gt;

&lt;p&gt;我在&lt;a href=&quot;http://web.stanford.edu/~ouster/cgi-bin/cs142-winter15/classEval.php&quot;&gt;史丹佛大學CS142課程&lt;/a&gt;這篇教材找到解答:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;class_eval is equivalent to typing the code inside a class statement.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;MyClass&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_eval&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;num&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@num&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;等於&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;MyClass&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;num&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@num&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;所以回到今天最一開頭的舉例 [instance_eval案例1:案例2:案例3]，透過移除部分的程式碼做實驗，從instance_eval，串到class_eval，再串回到instance_eval，好像又回到初衷、豁然開朗的感覺呢！&lt;/p&gt;

&lt;p&gt;我也領悟到了，其實程式寫法都可以換來換去，重點是，你想實現的功能是什麼？不同的寫法之間又有什麼優缺點比較？像在&lt;a href=&quot;https://blog.hothero.org/2015/08/05/instance-eval-yu--class-eval-chai-yi-/&quot;&gt;這篇&lt;/a&gt;提到：class_eval概念，跟module_eval是類似的，拿來用作擴充rails gem 所定義的 class，這也許可以當我第20天候鐵人賽的文章素材idea!&lt;/p&gt;

&lt;p&gt;最後，來複習一下昨天的變數比一比！剛好在今天的例子&lt;code class=&quot;highlighter-rouge&quot;&gt;class_eval&lt;/code&gt;、&lt;code class=&quot;highlighter-rouge&quot;&gt;instance_eval&lt;/code&gt;，類別實體變數和實體變數都有派上用場：）&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;類別實體變數 class instance variable&lt;/th&gt;
      &lt;th&gt;實體變數 instance variable&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;@類別實體變數&lt;/td&gt;
      &lt;td&gt;@實體變數&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;可用attr_accessor的方式改寫&lt;/td&gt;
      &lt;td&gt;可用attr_accessor的方式改寫&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;用在類別方法，不可用在實體方法&lt;/td&gt;
      &lt;td&gt;用在實體方法&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;也許這就是一種「過去每天累積的努力，成就現在的自己」最佳的例子吧！&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;Ref：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://coderwall.com/p/yycytw/ruby-on-rails-interview-questions&quot;&gt;Ruby on Rails Interview questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.hothero.org/2015/08/05/instance-eval-yu--class-eval-chai-yi-/&quot;&gt;instance_eval 與 class_eval 差異&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://web.stanford.edu/~ouster/cgi-bin/cs142-winter15/classEval.php&quot;&gt;Understanding class_eval and instance_eval&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Module.html#method-i-class_eval&quot;&gt;Ruby-doc.org : class_eval (Module)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/BasicObject.html#method-i-instance_eval&quot;&gt;Ruby-doc.org : instance_eval (BasicObject)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">第13天! 昨天談到了class variable, class instance variable和instance variable，也發現在實務上，類別實體變數和實體變數才是主流。今天我們要多談兩個跟前一篇的變數有關的方法:instance_eval和class_eval。讓每天都主題都環環相扣！</summary></entry><entry><title type="html">30天修煉Ruby面試精選30題 - Day12 千變萬化的變數: class variable 與 class instance variable 與 instance variable</title><link href="http://localhost:4000/ruby/interview/2018/09/21/day12_ruby_interview_questions_class_instance_variable.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day12 千變萬化的變數: class variable 與 class instance variable 與 instance variable " /><published>2018-09-21T08:57:00+10:00</published><updated>2018-09-21T08:57:00+10:00</updated><id>http://localhost:4000/ruby/interview/2018/09/21/day12_ruby_interview_questions_class_instance_variable</id><content type="html" xml:base="http://localhost:4000/ruby/interview/2018/09/21/day12_ruby_interview_questions_class_instance_variable.html">&lt;p&gt;前情提要:&lt;/p&gt;

&lt;p&gt;第12天，往細節探索去！昨天我們講到broc是有名字的區塊物件，可儲存變數；lambda是一種method方法，嚴格檢查參數數目。今天想要更深地討論變數：）&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-12&quot;&gt;Ruby經典面試題目 #12&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Ruby 的 類別變數與類別實體變數，與實體變數有何不同? What is difference between class variable, class instance variable and instance variable?&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;我們曾在[第四天]時討論過類別方法和實體方法。&lt;/p&gt;

&lt;p&gt;還記得我下的這個結論：如果要將實體方法，運用在某個客製化的實體，就使用instance method；如果某個方法並不會和某個特定的實體變數綁在一起，就使用class method。&lt;/p&gt;

&lt;h2 id=&quot;實體變數-instance-variable&quot;&gt;實體變數 instance variable&lt;/h2&gt;

&lt;p&gt;實體變數是一個比較好理解的概念，來舉個🌰例子吧：
我想把每天跑步的好習慣&lt;code class=&quot;highlighter-rouge&quot;&gt;RunDaily&lt;/code&gt;寫成class，為了維持好習慣，方法有兩個：早上跑&lt;code class=&quot;highlighter-rouge&quot;&gt;morning_run&lt;/code&gt;或者晚上跑&lt;code class=&quot;highlighter-rouge&quot;&gt;evening_run&lt;/code&gt;。今天是第12天&lt;code class=&quot;highlighter-rouge&quot;&gt;day12&lt;/code&gt;了~如果想早上跑，會存實體變數5km，晚上跑則存10km。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;RunDaily&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;morning_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@mr&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;evening_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@er&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;  
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;day12&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunDaily&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;morning_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day12&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;evening_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day12&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;可以看到實體變數(instance variable)以＠開頭，不需要先在class開頭宣告。&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Ruby的實體變數不是public，僅作用於於self指示的物件。除非明確提供其他方法，
否則無法從物件以外變更或查看。&lt;a href=&quot;https://guides.ruby.tw/ruby/instancevars.html&quot;&gt;原文&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;5&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunDaily:0x000055e64755a770 @mr=5&amp;gt;&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunDaily:0x000055e64755a770 @mr=5, @er=10&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;從輸出結果看到&lt;code class=&quot;highlighter-rouge&quot;&gt;day12&lt;/code&gt;這個物件的方法是&lt;code class=&quot;highlighter-rouge&quot;&gt;Rundaily&lt;/code&gt;，動態地加入了兩個實體變數&lt;code class=&quot;highlighter-rouge&quot;&gt;mr&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;er&lt;/code&gt;。&lt;/p&gt;

&lt;h2 id=&quot;實體變數與存取器-accessors&quot;&gt;實體變數與存取器 (Accessors)&lt;/h2&gt;

&lt;p&gt;物件的實體變數，就是物件的屬性(attribute)，同一個class的不同物件，其屬性也不同。&lt;/p&gt;

&lt;p&gt;假如我在明天第13天&lt;code class=&quot;highlighter-rouge&quot;&gt;Day13&lt;/code&gt;遇到休假日，所以早上一口氣跑了21km：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;day13&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;RunDaily&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;morning_run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day13&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果顯示此物件存在於不同的記憶體位置，而且變數也不同：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;RunDaily:0x0000561a9376e1d0 @mr=21&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;能夠讀取這些變數的屬性是非常重要的，讓我們可以更方便的讀取這些不同的物件（因為，凡走過必留下痕跡！就像翻開日記一樣，我想知道每個特定的日子分別跑了幾公里?或者是每天鐵人賽的文章內容?）&lt;/p&gt;

&lt;p&gt;因為剛剛說過：&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;Ruby的實體變數不是public，僅作用於於self指示的物件。除非明確提供其他方法。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;所以，現在來&lt;code class=&quot;highlighter-rouge&quot;&gt;IronmanDairy&lt;/code&gt;類別裡寫一個屬性存取器 (attribute accessors) 的公開方法，讓我們可以設定(&lt;code class=&quot;highlighter-rouge&quot;&gt;set_dairy&lt;/code&gt;)、取得(&lt;code class=&quot;highlighter-rouge&quot;&gt;get_dairy&lt;/code&gt;)昨天Day12的鐵人賽文章標題：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IronmanDairy&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;set_dairy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#write dairy&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;get_dairy&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#read dairy&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@title&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;day11&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;IronmanDairy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day11&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;day11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;set_dairy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Explain the difference between block, proc, lamdba.&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;day11&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get_dairy&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day11&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;日記&lt;code class=&quot;highlighter-rouge&quot;&gt;day11&lt;/code&gt;物件被我們讀取出來了：結果顯示出記憶體位置，及&lt;code class=&quot;highlighter-rouge&quot;&gt;@title&lt;/code&gt;實體變數：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;lt;IronmanDairy:0x000055d4f44e2748&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;IronmanDairy:0x000055d4f44e2748 @title=&quot;Explain the difference between block, proc, lamdba.&quot;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;持續改良version1&quot;&gt;[持續改良:version1]&lt;/h2&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;set_dairy&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;get_dairy&lt;/code&gt;方法雖然讓我們易於了解屬性的寫入與讀取方式，但把細節拆解開來的程式碼卻顯得過於冗長。所以我們想看看有沒有更簡化的寫法（沒錯，只要仔細找一找手冊，Ruby裡通常都有的！）&lt;/p&gt;

&lt;p&gt;如果我們要寫新文章&lt;code class=&quot;highlighter-rouge&quot;&gt;day12&lt;/code&gt;，可以用較簡單的方法寫入&lt;code class=&quot;highlighter-rouge&quot;&gt;title=&lt;/code&gt;以及取得&lt;code class=&quot;highlighter-rouge&quot;&gt;title&lt;/code&gt;想查看的文章標題，取代原本的&lt;code class=&quot;highlighter-rouge&quot;&gt;set_dairy&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;get_dairy&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IronmanDairy&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#write dairy&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;title&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#read dairy&lt;/span&gt;
    &lt;span class=&quot;vi&quot;&gt;@title&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;day12&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;IronmanDairy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;day12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;class variable, class instance variable and instance variable&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day12&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day12&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#&amp;lt;IronmanDairy:0x00005648020c0828&amp;gt;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;IronmanDairy:0x00005648020c0828 @title=&quot;class variable, class instance variable and instance variable&quot;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;很好！程式碼少了一些了。&lt;/p&gt;

&lt;p&gt;注意，這裡的&lt;code class=&quot;highlighter-rouge&quot;&gt;title=&lt;/code&gt;也是一個實體方法，我們來用&lt;code class=&quot;highlighter-rouge&quot;&gt;.instance_methods&lt;/code&gt;確認一下：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;IronmanDairy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; [:title=, :title]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;持續改良version2&quot;&gt;[持續改良:version2]&lt;/h2&gt;

&lt;p&gt;有沒有發現上面的程式碼中，大量出現這個&lt;code class=&quot;highlighter-rouge&quot;&gt;@title&lt;/code&gt;實體變數呢？那我們想要簡化一下，可以用&lt;code class=&quot;highlighter-rouge&quot;&gt;attr_accessor&lt;/code&gt;方式改寫。假設我們要創一個Day13鐵人賽文章物件，直接把實體的屬性存取器&lt;code class=&quot;highlighter-rouge&quot;&gt;attr_accessor :title&lt;/code&gt;，指定給symbol&lt;code class=&quot;highlighter-rouge&quot;&gt;:title&lt;/code&gt;，加在類別的開頭即可：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IronmanDairy&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:title&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;day13&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;IronmanDairy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day13&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#&amp;lt;IronmanDairy:0x00005579aee8bc00&amp;gt;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;day13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Still thinking...&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day13&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#&amp;lt;IronmanDairy:0x00005579aee8bc00 @title=&quot;Still thinking...&quot;&amp;gt;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;day13&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;title&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#&quot;Still thinking...&quot;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;IronmanDairy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_methods&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#[:title=, :title]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;從以上的三個舉例，是不是能夠對於實體變數有全方位的瞭解了呀？&lt;/p&gt;

&lt;h2 id=&quot;類別變數-class-variable&quot;&gt;類別變數 class variable&lt;/h2&gt;

&lt;p&gt;類別變數在類別開頭，用&lt;code class=&quot;highlighter-rouge&quot;&gt;@@&lt;/code&gt;定義，它是個危險的東西，因為所有的子類別中對類別變數的改動，都會影響其他類別的變數。我們用「雞兔同籠」的例子，來算算不同的動物各有幾隻腳：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Animal&lt;/span&gt;
  &lt;span class=&quot;vc&quot;&gt;@@legs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#先預設動物的腳為空值nil&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt;
    &lt;span class=&quot;vc&quot;&gt;@@legs&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; nil&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Chicken&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;
  &lt;span class=&quot;vc&quot;&gt;@@legs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Chicken&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 2&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 2 變兩隻腳了！&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Rabbit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;
  &lt;span class=&quot;vc&quot;&gt;@@legs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 4&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 4，又變四隻腳了！&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Snake&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#籠子裡加入一隻蛇&lt;/span&gt;
  &lt;span class=&quot;vc&quot;&gt;@@legs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#蛇沒有腳！&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 0&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Snake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 0&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 0 糟糕，為什麼這次兔子沒有腳！~~被蛇吃掉了~~&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;為了解決此問題，我們來研究Ruby的類別實體變數，看看是否有更好的做法。&lt;/p&gt;

&lt;h2 id=&quot;類別實體變數-class-instance-variable&quot;&gt;類別實體變數 class instance variable&lt;/h2&gt;

&lt;p&gt;我們在[Day1]中開宗明義地解釋物件導向語言的精髓：物件可以具有類別和實體變數。既然類別也是一種物件，那「類別物件」當然可以有「類別的實體變數」。我們繼續「蛇兔同籠」的例子，舉例出三種變數&lt;del&gt;大亂鬥&lt;/del&gt;：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Animal&lt;/span&gt;
  &lt;span class=&quot;vc&quot;&gt;@@legs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#設定class variable&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt;
    &lt;span class=&quot;vc&quot;&gt;@@legs&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;class_variables&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 印出類別變數: @@legs&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#類別變數:目前為空值 nil&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_variables&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; [] 尚未設定實體變數，所以沒東西&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Animal&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 設定instance variables&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@legs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;instance_variables&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 現在能印出實體變數: @legs&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#仍然是類別變數的空值 nil&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Animal&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;attr_accessor&lt;/span&gt; &lt;span class=&quot;ss&quot;&gt;:legs&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@legs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#class instance variables的設定法，先預設為1&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 1 #不是nil，不是0，而是1 (類別實體變數!)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Rabbit&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@legs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;4&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 兔子4隻腳&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 回到類別實體變數預設值1&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Snake&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;
  &lt;span class=&quot;vi&quot;&gt;@legs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Snake&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 蛇 0隻腳&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Rabbit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 兔子還是4隻腳! 太好了～沒有被吃掉&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Animal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;legs&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# =&amp;gt; 回到類別實體變數預設值1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;以上的舉例實實在在地證明我在這本書&lt;a href=&quot;https://books.google.com.au/books?id=YcmUCgAAQBAJ&quot;&gt;Effective Ruby中文版-寫出良好Ruby程式的48個具體做法&lt;/a&gt;Page 56查到的觀點：寧願用類別實體變數，也不要用類別變數。類別實體變數除了會打破類別及其子類別的共用關係（如同我們舉的例子中，動物的腳數目隨意被改變），也提供更多的封裝，讓類別定義層級、或從類別方法裡，唯一可存取的是類別實體變數。&lt;/p&gt;

&lt;p&gt;最後用比一比的表格來總結：）&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;類別變數class variable&lt;/th&gt;
      &lt;th&gt;類別實體變數 class instance variable&lt;/th&gt;
      &lt;th&gt;實體變數 instance variable&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;@@類別變數&lt;/td&gt;
      &lt;td&gt;@類別實體變數&lt;/td&gt;
      &lt;td&gt;@實體變數&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;在類別開頭設定&lt;/td&gt;
      &lt;td&gt;可用attr_accessor的方式改寫&lt;/td&gt;
      &lt;td&gt;可用attr_accessor的方式改寫&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;可用在類別方法或實體方法&lt;/td&gt;
      &lt;td&gt;用在類別方法，不可用在實體方法&lt;/td&gt;
      &lt;td&gt;用在實體方法&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;Ref：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://coderwall.com/p/yycytw/ruby-on-rails-interview-questions&quot;&gt;Ruby on Rails Interview questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://guides.ruby.tw/ruby/instancevars.html&quot;&gt;Ruby 使用手冊 - 實例變數 Instance variables&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://guides.ruby.tw/ruby/accessors.html&quot;&gt;Ruby 使用手冊 - 存取器 Accessors&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://books.google.com.au/books?id=YcmUCgAAQBAJ&quot;&gt;Effective Ruby中文版 - 寫出良好Ruby程式的48個具體做法(電子書)By Peter J. Jones&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://kaochenlong.com/2015/03/21/attr_accessor/&quot;&gt;Ruby 語法放大鏡之「attr_accessor 是幹嘛的?」&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ithelp.ithome.com.tw/articles/10160882&quot;&gt;Ruby女孩(21)：來聽聽類別變數與類別實體變數的自白(?)&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">前情提要:</summary></entry><entry><title type="html">30天修煉Ruby面試精選30題 - Day11 Ruby 的 block, proc, lamdba方法比較</title><link href="http://localhost:4000/ruby/interview/2018/09/20/day11_ruby_interview_questions_blocks_procs_lambdas.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day11 Ruby 的 block, proc, lamdba方法比較 " /><published>2018-09-20T11:57:00+10:00</published><updated>2018-09-20T11:57:00+10:00</updated><id>http://localhost:4000/ruby/interview/2018/09/20/day11_ruby_interview_questions_blocks_procs_lambdas</id><content type="html" xml:base="http://localhost:4000/ruby/interview/2018/09/20/day11_ruby_interview_questions_blocks_procs_lambdas.html">&lt;p&gt;前情提要:&lt;/p&gt;

&lt;p&gt;第11天開始，要更深入Ruby的精髓！&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-11&quot;&gt;Ruby經典面試題目 #11&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Ruby 的 block, proc, lamdba方法比較? What’s difference between blocks, procs and lambdas?&lt;/code&gt;&lt;/p&gt;

&lt;h2 id=&quot;block-程式碼區塊&quot;&gt;block 程式碼區塊&lt;/h2&gt;

&lt;p&gt;程式碼區塊是用 &lt;code class=&quot;highlighter-rouge&quot;&gt;do... end&lt;/code&gt;圍起來，圍出特定一個區域、放程式碼的地方。
就好像跑馬拉松一樣，道路上會進行交通管制，把參賽者的跑道圍起來。&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;do... end&lt;/code&gt;的形式常常使用在&lt;code class=&quot;highlighter-rouge&quot;&gt;陣列&lt;/code&gt;和&lt;code class=&quot;highlighter-rouge&quot;&gt;迴圈&lt;/code&gt;裡，把&lt;code class=&quot;highlighter-rouge&quot;&gt;陣列&lt;/code&gt;想成參賽者的列表，&lt;code class=&quot;highlighter-rouge&quot;&gt;迴圈&lt;/code&gt;想成跑道，每個參賽者（陣列內的元素）都要一個一個進入跑道（迴圈），是不是就很好理解了呢?&lt;/p&gt;

&lt;h3 id=&quot;block-doend&quot;&gt;block: do…end&lt;/h3&gt;

&lt;p&gt;我們來用&lt;code class=&quot;highlighter-rouge&quot;&gt;do... end&lt;/code&gt;圍出&lt;code class=&quot;highlighter-rouge&quot;&gt;block&lt;/code&gt;。昨天提到ruby invoke method的階層有五層：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;find_method&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Class&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Module&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Object&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Kernel&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;BasicObject&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;find_method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find_method&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;find_method&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果顯示為：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;no&quot;&gt;Class&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Module&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Object&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;Kernel&lt;/span&gt;
&lt;span class=&quot;no&quot;&gt;BasicObject&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;block-&quot;&gt;block: {}&lt;/h3&gt;

&lt;p&gt;假如某個特定參賽者選手如我，每年都一次馬拉松，而2018年即將跑第3次啦！我可以用大括號&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;印出如下：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;I love running 42K marathon!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;因為很重要所以喊3次，這個大括號&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;圍出的區塊，忠實地印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;I love running 42K marathon!&quot;&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;I love running 42K marathon!&quot;&lt;/span&gt;
&lt;span class=&quot;s2&quot;&gt;&quot;I love running 42K marathon!&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;有沒有注意到，不管是&lt;code class=&quot;highlighter-rouge&quot;&gt;do... end&lt;/code&gt;，還是&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;，前面都跟著&lt;code class=&quot;highlighter-rouge&quot;&gt;method&lt;/code&gt;呢?
&lt;code class=&quot;highlighter-rouge&quot;&gt;do... end&lt;/code&gt;前有&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Array.html#method-i-each&quot;&gt;.each&lt;/a&gt;這個Array裡的方法；&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;前有&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/Integer.html#method-i-times&quot;&gt;.times&lt;/a&gt;這個屬於Integer的方法。&lt;/p&gt;

&lt;p&gt;所以，重點出現：&lt;em&gt;block不是物件&lt;/em&gt;！必須跟在其他的方法或物件之後。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;times&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;block is not Object!!!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#很重要所以說3次&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;block-yield&quot;&gt;block: yield&lt;/h3&gt;

&lt;p&gt;人生就像馬拉松一樣漫漫長路。有的時候跑步跑累了，我們需要喝點水、休息喘口氣。那該如何用&lt;code class=&quot;highlighter-rouge&quot;&gt;block&lt;/code&gt;表示呢?我們使用&lt;code class=&quot;highlighter-rouge&quot;&gt;yield&lt;/code&gt;方法呼叫：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keep_running&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-start line-&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#block&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-finish line-&quot;&lt;/span&gt;  
 &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;keep_running&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;drink water&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果顯示為：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;drink&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;water&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;finish&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在ruby on rails專案裡，我們也很常在&lt;code class=&quot;highlighter-rouge&quot;&gt;erb&lt;/code&gt;檔名下，發現這種利用&lt;code class=&quot;highlighter-rouge&quot;&gt;yield&lt;/code&gt;方法，調用程式碼區塊的頁面:&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;http-equiv=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Content-Type&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;text/html; charset=utf-8&quot;&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;

  &lt;span class=&quot;nt&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;%=&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;其中&lt;code class=&quot;highlighter-rouge&quot;&gt;&amp;lt;%= yield %&amp;gt;&lt;/code&gt;就是在html頁面代入&lt;code class=&quot;highlighter-rouge&quot;&gt;ruby&lt;/code&gt;程式碼的區塊。關於&lt;a href=&quot;https://guides.rubyonrails.org/layouts_and_rendering.html#understanding-yield&quot;&gt;更多yield&lt;/a&gt;說明，可以參考&lt;a href=&quot;(https://guides.rubyonrails.org/layouts_and_rendering.html#understanding-yield)&quot;&gt;Ruby on Rails Guide&lt;/a&gt;.&lt;/p&gt;

&lt;h2 id=&quot;proc-程序物件&quot;&gt;Proc 程序物件&lt;/h2&gt;

&lt;p&gt;Proc是程序物件，跟block一樣可放入程式區塊。&lt;/p&gt;

&lt;p&gt;在Ruby API裡，說到：&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.4.0/Proc.html&quot;&gt;Proc&lt;/a&gt; objects are blocks of code that have been bound to a set of local variables.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;方剛我說明到block不是物件，因此如果我們遇到需要一次處理很多的block，或是多次使用一個block的情況時，與其重複寫code，不如把需要重複的部分寫成物件。&lt;/p&gt;

&lt;p&gt;我現在想進一步利用Proc放入程式判斷，計算在馬拉松賽事、半馬和全馬分別跑過幾公里。&lt;/p&gt;

&lt;p&gt;首先用&lt;code class=&quot;highlighter-rouge&quot;&gt;block&lt;/code&gt;列出參賽紀錄:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;place&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2012 太魯閣半馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2012 玉山半馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2013 萬金石半馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2013 雙溪半馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2013 台北市半馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2014 黃金海岸半馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2014 Perth半馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2016 Sydney全馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2017 Melbourne全馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;2018 大堡礁全馬&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;place&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;do&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;place&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;place&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;block&lt;/code&gt;顯示出，凡跑過必留下痕跡！&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;mi&quot;&gt;2012&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;太魯閣半馬&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2012&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;玉山半馬&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2013&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;萬金石半馬&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2013&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;雙溪半馬&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2013&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;台北市半馬&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2014&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;黃金海岸半馬&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2014&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Perth&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;半馬&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2016&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Sydney&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;全馬&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2017&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Melbourne&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;全馬&lt;/span&gt;
&lt;span class=&quot;mi&quot;&gt;2018&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;大堡礁全馬&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;以上紀錄顯示，從2012-2018年，半馬(21KM)跑過7次，全馬(42K)跑3次。由於&lt;code class=&quot;highlighter-rouge&quot;&gt;block&lt;/code&gt;無法代入參數，此時&lt;code class=&quot;highlighter-rouge&quot;&gt;Proc&lt;/code&gt;就派上用場了！&lt;/p&gt;

&lt;h3 id=&quot;proc-的類別方法&quot;&gt;Proc 的類別方法&lt;/h3&gt;

&lt;p&gt;來寫我人生第一個使用Proc物件的跑步方法&lt;code class=&quot;highlighter-rouge&quot;&gt;proc_running&lt;/code&gt;。
這個類別方法(class method)跟一般的method寫法一樣，方法內用&lt;code class=&quot;highlighter-rouge&quot;&gt;.new&lt;/code&gt;產生新的程序物件。
我們方法外用&lt;code class=&quot;highlighter-rouge&quot;&gt;{}&lt;/code&gt;大括弧圍出block，用&lt;code class=&quot;highlighter-rouge&quot;&gt;.call&lt;/code&gt;方法呼叫程序物件&lt;code class=&quot;highlighter-rouge&quot;&gt;proc&lt;/code&gt;本身：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;proc_running&lt;/span&gt;
  &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proc_running&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;I love running!&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; &quot;I love running&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;來看看&lt;code class=&quot;highlighter-rouge&quot;&gt;Proc&lt;/code&gt;代入參數之後，可以做的事就變多囉，我現在想計算半馬(21KM)跑過7次，全馬(42K)跑3次，分別是幾公里：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;count_km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;full_marathon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count_km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#126&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;half_marathon&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;count_km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#147&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;I've run &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;half_marathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; Km in Half Marathon and &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;full_marathon&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; Km in Marathon &quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;還記得&lt;code class=&quot;highlighter-rouge&quot;&gt;#{}&lt;/code&gt;可以幫我們插入字串嗎？（此方法會先利用&lt;code class=&quot;highlighter-rouge&quot;&gt;to_s&lt;/code&gt;將傳入的Integer成String格式）
所以計算答案揭曉：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;I've run 147 Km in Half Marathon and 126 Km in Marathon &quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;proc-的實體方法&quot;&gt;Proc 的實體方法&lt;/h3&gt;

&lt;p&gt;Proc可以new出新的程序物件實體&lt;code class=&quot;highlighter-rouge&quot;&gt;km_proc&lt;/code&gt;：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;km_proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;collect&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;n&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;km&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km_proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; [42, 126]&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;km_proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;7&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; [21, 147]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這樣我就可以把計算的跑步公里數，美美地用&lt;a href=&quot;https://ruby-doc.org/core-2.2.0/Array.html#method-i-collect&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;.collect&lt;/code&gt;&lt;/a&gt;這個陣列方法&lt;del&gt;裱框&lt;/del&gt;印出來！&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;126&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;147&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;觀察剛剛的類別方法，我們發現&lt;code class=&quot;highlighter-rouge&quot;&gt;Proc&lt;/code&gt;可以代入參數，也可以用return回傳參數，那我想要仿造文章前頭這段&lt;code class=&quot;highlighter-rouge&quot;&gt;block&lt;/code&gt;程式碼概念:&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;keep_running&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-start line-&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;yield&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#block&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-finish line-&quot;&lt;/span&gt;  
 &lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

 &lt;span class=&quot;n&quot;&gt;keep_running&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;drink water&quot;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;寫一個喝水&lt;code class=&quot;highlighter-rouge&quot;&gt;Proc&lt;/code&gt;程式：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;proc_keep_running&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-start line-&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;water_proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;drink water&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;water_proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-finish line-&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;proc_keep_running&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# Prints &quot;-start line-&quot; but not &quot;-finish line-&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;drink&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;water&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;疑？怎麼喝完水就打住，不繼續跑向終點&lt;code class=&quot;highlighter-rouge&quot;&gt;-finish line-&lt;/code&gt;呢?
我們發現了，在&lt;code class=&quot;highlighter-rouge&quot;&gt;proc&lt;/code&gt;内使用&lt;code class=&quot;highlighter-rouge&quot;&gt;return&lt;/code&gt;會立即返回，不再繼續執行後面程式。(所以，永遠不能在&lt;code class=&quot;highlighter-rouge&quot;&gt;Proc&lt;/code&gt;內使用&lt;code class=&quot;highlighter-rouge&quot;&gt;return&lt;/code&gt;，這樣跑馬拉松會無法抵達終點啊啊啊啊！)&lt;/p&gt;

&lt;h2 id=&quot;lambda-匿名函數&quot;&gt;lambda 匿名函數&lt;/h2&gt;

&lt;p&gt;身為工程師，問題代表著機會；出現問題就代表會有解決方案的出現，在Proc中有一個特別的用法叫&lt;code class=&quot;highlighter-rouge&quot;&gt;lambda&lt;/code&gt;。創建方法有兩種指令:&lt;code class=&quot;highlighter-rouge&quot;&gt;lambda&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;-&amp;gt;()&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;lambda_running&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Run with lambda!&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;lambda_running&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Run with lambda!&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果我們使用&lt;code class=&quot;highlighter-rouge&quot;&gt;puts&lt;/code&gt;印出，會發現&lt;code class=&quot;highlighter-rouge&quot;&gt;lambda&lt;/code&gt;是&lt;code class=&quot;highlighter-rouge&quot;&gt;Proc&lt;/code&gt;的一種：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;lambda_running&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#&amp;lt;Proc:0x000056043ddfd1e8@main.rb:11 (lambda)&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;剛剛說到Proc方法內不能放return，我們來用程式碼比較proc與lambda回傳值：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;proc_run&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Run with Proc!&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;proc_run&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# 跑不出來&quot;Run with Proc&quot;結果!&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;但lambda可以：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;lambda_run&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lam&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lam&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Run with lambda!&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;lambda_run&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; &quot;Run with lambda!&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;從下文說明，我們可以了解&lt;code class=&quot;highlighter-rouge&quot;&gt;Proc&lt;/code&gt;只會回傳目前階層的內容，而不會像一般的方法以及&lt;code class=&quot;highlighter-rouge&quot;&gt;lambda&lt;/code&gt;匿名方法一樣，整個走完方法裡面的該回傳的值。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;The difference between procs and lambdas is how they react to a return statement. A lambda will return normally, like a regular method. But a proc will try to return from the current context.The reason is that you can’t return from the top-level context.&lt;a href=&quot;http://www.rubyguides.com/2016/02/ruby-procs-and-lambdas/&quot;&gt;出處&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;現在來用&lt;code class=&quot;highlighter-rouge&quot;&gt;lambda&lt;/code&gt;的兩種調用寫法&lt;code class=&quot;highlighter-rouge&quot;&gt;lambda&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;-&amp;gt;()&lt;/code&gt;練習寫作程式碼，分別回傳半程馬拉松(hm)和全程馬拉松(fm)的公里數：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;half_proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;full_proc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;hm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;fm&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;half_proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#21&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;full_proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#42&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果&lt;code class=&quot;highlighter-rouge&quot;&gt;half_proc.call&lt;/code&gt;會回傳21，&lt;code class=&quot;highlighter-rouge&quot;&gt;full_proc.call&lt;/code&gt;會回傳42。&lt;/p&gt;

&lt;p&gt;如果參數多放一個呢? &lt;del&gt;1.5個馬拉松&lt;/del&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;full_proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;會出現錯誤訊息:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;main.rb:17:in &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;block &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &amp;lt;main&amp;gt;&lt;span class=&quot;s1&quot;&gt;': wrong number of arguments (given 3, expected 2) (ArgumentError)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這個原因在於&lt;code class=&quot;highlighter-rouge&quot;&gt;lambda&lt;/code&gt;是種方法，，所以它會檢查參數個數是否匹配。
來用程式舉例一下：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;lambda_argument&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Lambda result: 21Km *2= &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lambda_argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;Km&quot;&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;proc_argument&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;Proc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;I don't care about how many arguments inside Proc!&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Proc result: &lt;/span&gt;&lt;span class=&quot;si&quot;&gt;#{&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;proc_argument&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;21&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;63&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s2&quot;&gt;&quot;Lambda result: 21Km *2= 42Km&quot;&lt;/span&gt;

&lt;span class=&quot;s2&quot;&gt;&quot;Proc result: I don't care about how many arguments inside Proc!&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;超級比一比的表格又出現了：&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;block程式區塊&lt;/th&gt;
      &lt;th&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.4.0/Proc.html&quot;&gt;Proc&lt;/a&gt;程式區塊物件&lt;/th&gt;
      &lt;th&gt;lambda 匿名方法&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;不是物件&lt;/td&gt;
      &lt;td&gt;帶名字的區塊物件，可儲存變數&lt;/td&gt;
      &lt;td&gt;和Proc類似，但更加接近method方法&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;不是參數&lt;/td&gt;
      &lt;td&gt;可帶參數&lt;/td&gt;
      &lt;td&gt;嚴格檢查參數數目&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;N/A&lt;/td&gt;
      &lt;td&gt;在Proc裡&lt;code class=&quot;highlighter-rouge&quot;&gt;return&lt;/code&gt;其他值，會離開此物件的方法&lt;/td&gt;
      &lt;td&gt;在lamba裡&lt;code class=&quot;highlighter-rouge&quot;&gt;return&lt;/code&gt;其他值，會回來繼續執行完方法&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;最後的最後，我們用&lt;code class=&quot;highlighter-rouge&quot;&gt;lambda&lt;/code&gt;來寫馬拉松喝水的方法吧！&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;lambda_keep_running&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-start line-&quot;&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;water_lambda&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;drink water&quot;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;water_lambda&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;call&lt;/span&gt;
  &lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;-finish line-&quot;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
  &lt;span class=&quot;n&quot;&gt;lambda_keep_running&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;結果印出：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;drink&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;water&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;finish&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;line&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;順利迎向終點finish line了！&lt;/p&gt;

&lt;p&gt;也祝大家的IT邦鐵人賽，都能順利完賽！！！：）&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;Ref：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.bater.gq/ruby/2018/02/02/top-10-essential-ruby-interview-questions.html&quot;&gt;Top 10 Essential Ruby Interview Questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/timurcatakli/ruby-on-rails-interview-questions-answers&quot;&gt;Ruby on Rails Technical Interview Questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://railsbook.tw/chapters/07-ruby-basic-3.html&quot;&gt;方法與程式碼區塊（block)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://www.rubyguides.com/2016/02/ruby-procs-and-lambdas/&quot;&gt;The Ultimate Guide to Blocks, Procs &amp;amp; Lambdas&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://my.oschina.net/jsk/blog/540371&quot;&gt;Ruby中的Proc/lambda&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ruby-doc.com/core/index.html&quot;&gt;Ruby-Core&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.5.1/doc/syntax/methods_rdoc.html&quot;&gt;ruby-doc.org: Method&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-do&quot;&gt;ruby-doc.org: Object Method: do&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;http://ruby-doc.org/core-2.4.0/Proc.html&quot;&gt;Procs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">前情提要:</summary></entry><entry><title type="html">30天修煉Ruby面試精選30題 - Day10 Ruby invoke method調用方法?</title><link href="http://localhost:4000/ruby/interview/2018/09/19/day10_ruby_interview_questions_ruby_invoke_method.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day10 Ruby invoke method調用方法? " /><published>2018-09-19T10:57:00+10:00</published><updated>2018-09-19T10:57:00+10:00</updated><id>http://localhost:4000/ruby/interview/2018/09/19/day10_ruby_interview_questions_ruby_invoke_method</id><content type="html" xml:base="http://localhost:4000/ruby/interview/2018/09/19/day10_ruby_interview_questions_ruby_invoke_method.html">&lt;p&gt;前情提要:&lt;/p&gt;

&lt;p&gt;不知不覺到了第10天囉！。鐵人賽進度1/3（挺胸！）接下來應該會進入學習的深水區，但是我會越戰越勇。路遙知馬力，日久見人心！🏃‍♀️&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-10&quot;&gt;Ruby經典面試題目 #10&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Ruby如何引入方法? Please explain how Ruby looks up a method to invoke?&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;每當不知從何下筆時，我的起手式是開始回顧之前的文章，盤點我已經走了多遠、以及基礎觀念到底掌握了多少：&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;鐵人賽足跡&lt;/th&gt;
      &lt;th&gt;面試問題&lt;/th&gt;
      &lt;th&gt;我的總結&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Day 1&lt;/td&gt;
      &lt;td&gt;class&lt;/td&gt;
      &lt;td&gt;class建立物件實體，以method和資料互動&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Day 2&lt;/td&gt;
      &lt;td&gt;class與 module&lt;/td&gt;
      &lt;td&gt;class可繼承，module不可繼承&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Day 3&lt;/td&gt;
      &lt;td&gt;module&lt;/td&gt;
      &lt;td&gt;module裡的method可被include和extend&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Day 4&lt;/td&gt;
      &lt;td&gt;instance method與class method&lt;/td&gt;
      &lt;td&gt;include用於instance method, extend用於class method&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Day 5&lt;/td&gt;
      &lt;td&gt;self物件與singleton method&lt;/td&gt;
      &lt;td&gt;singleton method是singleton class的instence method&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Day 6&lt;/td&gt;
      &lt;td&gt;public, protected, private method&lt;/td&gt;
      &lt;td&gt;在classs外無法取得protected或private method&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Day 7&lt;/td&gt;
      &lt;td&gt;symbol與string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;:符號&lt;/code&gt; symbol class的物件實體，object_id相同 / &lt;code class=&quot;highlighter-rouge&quot;&gt;字串:&lt;/code&gt; string變數指向字串物件，object_id不同&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Day 8&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;concat&lt;/code&gt; 與 &lt;code class=&quot;highlighter-rouge&quot;&gt;+=&lt;/code&gt; method&lt;/td&gt;
      &lt;td&gt;以&lt;code class=&quot;highlighter-rouge&quot;&gt;concat&lt;/code&gt;串接， object_id相同 / &lt;code class=&quot;highlighter-rouge&quot;&gt;+=&lt;/code&gt; object_id不同&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Day 9&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;||=&lt;/code&gt; method&lt;/td&gt;
      &lt;td&gt;(or-equals)條件判斷 &lt;code class=&quot;highlighter-rouge&quot;&gt;a||=b&lt;/code&gt;是 &lt;code class=&quot;highlighter-rouge&quot;&gt;a || a = b&lt;/code&gt;縮寫，意思為條件運算式 &lt;code class=&quot;highlighter-rouge&quot;&gt;a ? a : a = b&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;洋洋灑灑地條列出這麼多方法之後，我們好奇的問，Ruby到底是怎麼尋找這些方法的呢？&lt;/p&gt;

&lt;p&gt;Ruby最先尋找的地方是物件的&lt;code class=&quot;highlighter-rouge&quot;&gt;eigenclass&lt;/code&gt;（特徵類別，物件上層的隱藏類別)method會直接定義在裡面，如同&lt;a href=&quot;https://tingtinghsu.github.io/ruby/rails/interview/junior/2018/09/14/day05_ruby_interview_questions_self_-singleton_method.htmln&quot;&gt;Day 5&lt;/a&gt;提到的singleton method(類別方法)。&lt;/p&gt;

&lt;p&gt;如果Ruby沒有辦法在物件的&lt;code class=&quot;highlighter-rouge&quot;&gt;eigenclass&lt;/code&gt;找到，它會尋找此物件class所屬的上一層(ancestor)class、層層往上搜尋，深入到&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/Object.html&quot;&gt;Object&lt;/a&gt;、到&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/Kernel.html&quot;&gt;Kernal&lt;/a&gt;、最後去&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/BasicObject.html&quot;&gt;BasicObject&lt;/a&gt;搜尋method是否在裡面。&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://s3-ap-southeast-2.amazonaws.com/tingsrailsdemo/class.png&quot; alt=&quot;https://s3-ap-southeast-2.amazonaws.com/tingsrailsdemo/class.png&quot; /&gt; &lt;a href=&quot;https://ruby-china.org/topics/33308&quot;&gt;圖片來源&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;如果都找不到Method的話呢？&lt;/p&gt;

&lt;p&gt;不用擔心，Ruby就像Google Map一樣給予提示，它會在內部搜尋另一個:&lt;code class=&quot;highlighter-rouge&quot;&gt;method_missing&lt;/code&gt; method給這個物件的class，提供Ruby工程師解bug的線索：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;undefined&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;sb&quot;&gt;`某方法名稱' (NoMethodError)
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;這個線索我們並不陌生，因為我們已經有多次經驗了：&lt;/p&gt;

&lt;p&gt;在[Day 6]，無法使用class裡的方法&lt;code class=&quot;highlighter-rouge&quot;&gt;.protected&lt;/code&gt;及&lt;code class=&quot;highlighter-rouge&quot;&gt;private&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;day6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;protected&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; undefined method `protected' (NoMethodError)&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;day6&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#=&amp;gt; undefined method `private' (NoMethodError)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在[Day 7]Symbol找不到方法&lt;code class=&quot;highlighter-rouge&quot;&gt;[]=&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;ss&quot;&gt;:tingsmessage&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Z&quot;&lt;/span&gt;
&lt;span class=&quot;c1&quot;&gt;#undefined method `[]=' for :tingsmessage:Symbol (NoMethodError)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;我從&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/&quot;&gt;https://ruby-doc.org/core-2.5.1/&lt;/a&gt;列出我在前十篇文章所用到的實體方法(Public Instance Methods)，整理表格如下：&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/Object.html&quot;&gt;Object&lt;/a&gt;&lt;/th&gt;
      &lt;th&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/Kernel.html&quot;&gt;Kernal&lt;/a&gt;&lt;/th&gt;
      &lt;th&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/BasicObject.html&quot;&gt;BasicObject&lt;/a&gt;&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;class&lt;/code&gt; →class&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;puts&lt;/code&gt;(obj, …) → nil&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;object_id&lt;/code&gt; →integer&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;extend&lt;/code&gt;(module) →obj&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;String(arg)&lt;/code&gt; → string&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;send&lt;/code&gt;(symbol [, args…]) → obj&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;singleton_method&lt;/code&gt;(sym) → method&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Hash(arg)&lt;/code&gt; → hash&lt;/td&gt;
      &lt;td&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;new()&lt;/code&gt;&lt;em&gt;這個是Public Class Methods！&lt;/em&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;為了更清楚釐清自己的觀念，我決定用英文整理出這10天的學習紀錄：&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;觀念&lt;/th&gt;
      &lt;th&gt;解釋&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/Class.html&quot;&gt;class&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Classes in Ruby are first-class objects.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/doc/syntax/modules_and_classes_rdoc.html&quot;&gt;module&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Modules serve two purposes in Ruby, namespacing and mix-in functionality.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/doc/syntax/modules_and_classes_rdoc.html#label-Methods&quot;&gt;class method&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Class methods (methods on a module) may be called directly.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/doc/syntax/modules_and_classes_rdoc.html#label-Methods&quot;&gt;instance method&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Instance methods defined in a module are only callable when included.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/Module.html&quot;&gt;include&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;when the module is included, istance methods appear as methods in a class. (module methods do not.)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/Object.html#method-i-extend&quot;&gt;extend&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Adds to obj the instance methods from each module given as a parameter.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/doc/syntax/modules_and_classes_rdoc.html#label-self&quot;&gt;self&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Self refers to the object that defines the current scope. (it will change when it a different method or a new module) .&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/Object.html#method-i-singleton_method&quot;&gt;singleton class&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;If object is nil, true, or false, it returns NilClass, TrueClass, or FalseClass. (&lt;em&gt;可以直接存取，而不需要實體化此類別的物件。&lt;/em&gt;)&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/singletonmethods.html&quot;&gt;singleton method&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;The behavior of an instance is determined by its class.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/Module.html#method-i-public&quot;&gt;public method&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;With no arguments, sets the default visibility for subsequently defined methods to public. With arguments, sets the named methods to have public visibility.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/Module.html#method-i-protected&quot;&gt;projected method&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;If a method has protected visibility, it is callable only where self of the context is the same as the method.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/Module.html#method-i-private&quot;&gt;private method&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;With no arguments, sets the default visibility for subsequently defined methods to private. With arguments, sets the named methods to have private visibility.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/Symbol.html&quot;&gt;symbol&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;Symbol objects represent names and some strings inside the Ruby interpreter.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/String.html&quot;&gt;string&lt;/a&gt;&lt;/td&gt;
      &lt;td&gt;A String object holds and manipulates an arbitrary sequence of bytes&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/String.html#method-i-concat&quot;&gt;concat&lt;/a&gt; (string method)&lt;/td&gt;
      &lt;td&gt;Concatenates the given object(s) to str. If an object is an Integer, it is converted to a character before concatenation.&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/String.html#method-i-2B&quot;&gt;+&lt;/a&gt; (string method)&lt;/td&gt;
      &lt;td&gt;Concatenation — Returns a new String containing&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;&lt;a href=&quot;https://ruby-doc.com/core/String.html#method-i-2B&quot;&gt;true&lt;code class=&quot;highlighter-rouge&quot;&gt;|&lt;/code&gt;&lt;/a&gt; (TrueClass method)&lt;/td&gt;
      &lt;td&gt;Or—Returns true. As obj is an argument to a method call, it is always evaluated&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;感想：&lt;/p&gt;

&lt;p&gt;為了做Ruby如何invoke method的表格，我竟然把Ruby API的&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/Object.html&quot;&gt;Object&lt;/a&gt; ，&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/Kernel.html&quot;&gt;Kernal&lt;/a&gt; ，&lt;a href=&quot;https://ruby-doc.org/core-2.5.1/BasicObject.html&quot;&gt;BasicObject&lt;/a&gt; 頁面翻閱了一遍，了解輸入的參數怎麼用、已經輸出的物件會是什麼形式。這是我過去從來沒想過自己可以做得到的事（感覺翻手冊是高手才看得懂的境界啊！）經過這10天成長收穫巨大！&lt;/p&gt;

&lt;p&gt;明天來繼續研究更多method!!!! :)&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;Ref：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.bater.gq/ruby/2018/02/02/top-10-essential-ruby-interview-questions.html&quot;&gt;Top 10 Essential Ruby Interview Questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/timurcatakli/ruby-on-rails-interview-questions-answers&quot;&gt;Ruby on Rails Technical Interview Questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://ruby-doc.com/core/index.html&quot;&gt;Ruby-Core&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;[Please explain nuances of&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
          &lt;td&gt;=](https://groups.google.com/forum/#!topic/comp.lang.ruby/y1Maaqk_Q7c)&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;[A short-circuit (&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
          &lt;td&gt;=) edge case](http://davidablack.net/dablog.html#2008/3/25/a-short-circuit-edge-case)&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">前情提要:</summary></entry><entry><title type="html">30天修煉Ruby面試精選30題 - Day09 Ruby的 a ||= b (or-equals)是什麼意思呢?</title><link href="http://localhost:4000/ruby/interview/2018/09/18/day09_ruby_interview_questions_ruby_idiom_or_equals.html" rel="alternate" type="text/html" title="30天修煉Ruby面試精選30題 - Day09 Ruby的 a ||= b (or-equals)是什麼意思呢? " /><published>2018-09-18T09:18:00+10:00</published><updated>2018-09-18T09:18:00+10:00</updated><id>http://localhost:4000/ruby/interview/2018/09/18/day09_ruby_interview_questions_ruby_idiom_or_equals</id><content type="html" xml:base="http://localhost:4000/ruby/interview/2018/09/18/day09_ruby_interview_questions_ruby_idiom_or_equals.html">&lt;p&gt;前情提要:&lt;/p&gt;

&lt;p&gt;寫了這一系列下來，發現Ruby有許多特別的方法。前幾天講了關於String字串，在第八天我們了解串接(concatenate)與插入interpolation&lt;code class=&quot;highlighter-rouge&quot;&gt;#{}&lt;/code&gt;方法，就連加號&lt;code class=&quot;highlighter-rouge&quot;&gt;+&lt;/code&gt;也是方法之一呢。今天要來研究新的字串與數值比較的條件指定運算式(conditional assignment operator)囉！&lt;/p&gt;

&lt;hr /&gt;

&lt;h1 id=&quot;ruby經典面試題目-09&quot;&gt;Ruby經典面試題目 #09&lt;/h1&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;請解釋 Explain this ruby idiom (or-equals) : a ||= b?&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;如果a沒有被初始化，或是為空值&lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;或&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;，a等於b；
其他情況下，a值不變。&lt;/p&gt;

&lt;p&gt;If a is not initialized (or if it is set to &lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt; or &lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;), set it with the value of b.&lt;/p&gt;

&lt;p&gt;讓我們來看下列的運算式：
指定a的值為1，因此非&lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;或&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;。
a經過&lt;code class=&quot;highlighter-rouge&quot;&gt;||=&lt;/code&gt;(or-equals)的方法判斷，值仍維持不變 &lt;code class=&quot;highlighter-rouge&quot;&gt;a=1&lt;/code&gt;:&lt;/p&gt;

&lt;p&gt;例子1&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;false&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#a原本為false，印出a=nil&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;例子2&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;nil&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kp&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;p&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#a原本為nil，印出a=true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;例子3&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#a已指定值，印出a=1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;看起來很簡單的題目，為什麼特地單獨挑一天說明呢？因為其實這個&lt;code class=&quot;highlighter-rouge&quot;&gt;or-equals&lt;/code&gt;縮寫，背後大有玄機！&lt;/p&gt;

&lt;p&gt;這邊想特別指出是，&lt;code class=&quot;highlighter-rouge&quot;&gt;a ||= b&lt;/code&gt; 為 &lt;code class=&quot;highlighter-rouge&quot;&gt;a || a = b&lt;/code&gt;的縮寫：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;---------------&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&lt;/span&gt;&lt;span class=&quot;c1&quot;&gt;#or eqauls&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;---------------&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;如果a沒有被初始化，或是為空值&lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;或&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;，a等於b；
其他情況下，a值不變。&lt;/p&gt;

&lt;p&gt;注意，&lt;code class=&quot;highlighter-rouge&quot;&gt;a ||= b&lt;/code&gt; 並非 &lt;code class=&quot;highlighter-rouge&quot;&gt;a = a || b&lt;/code&gt;的縮寫，讓我們來比較一下語法含義：&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;---------------&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;---------------&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;then&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;end&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;在(if a then a = a)這個語法上，a已經被比較過兩次（it is evaluated twice），是不是就沒這麼簡潔與精確了呢?&lt;/p&gt;

&lt;p&gt;因此，雖然這兩個縮寫印出來都會是 &lt;code class=&quot;highlighter-rouge&quot;&gt;a = 1&lt;/code&gt;。但意思是很不一樣的。&lt;/p&gt;

&lt;div class=&quot;language-ruby highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;#a=1&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#a=1&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;puts&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#a=1&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;（在c++程式裡 &lt;code class=&quot;highlighter-rouge&quot;&gt;a += b&lt;/code&gt; 是 &lt;code class=&quot;highlighter-rouge&quot;&gt;a = a + b&lt;/code&gt;的縮寫，但Ruby不是C++，詳見&lt;a href=&quot;https://groups.google.com/forum/#!topic/comp.lang.ruby/y1Maaqk_Q7c&quot;&gt;Ruby Forum在2008年時這裡&lt;/a&gt;的討論串）&lt;/p&gt;

&lt;p&gt;如果以擬人化的方式解釋，我會說a是在「成為自己的過程」。
如果a的心裡沒有idea （夢想）尚未被初始化，或者什麼想法都沒有(&lt;code class=&quot;highlighter-rouge&quot;&gt;nil&lt;/code&gt;)或是負面想法太多(&lt;code class=&quot;highlighter-rouge&quot;&gt;false&lt;/code&gt;)，
a就會被b影響，變成為b。&lt;/p&gt;

&lt;p&gt;我相信我們最終，都不想成為別人，只想成為自己。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Be Yourself. Everyone Else is Already Taken.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;就像Ruby之所以成為Ruby一樣的特別，因為它語法上的創新與簡潔，是其他程式無可取代的。&lt;/p&gt;

&lt;p&gt;後記：
為了找這一篇題目的解答，發現google mail list上(10年前)最初關於這個問題的討論串，還蠻感動的！&lt;/p&gt;

&lt;p&gt;這或許就是追求知識源頭、逼近真實的過程吧！：）&lt;/p&gt;

&lt;p&gt;===&lt;/p&gt;

&lt;p&gt;Ref：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.bater.gq/ruby/2018/02/02/top-10-essential-ruby-interview-questions.html&quot;&gt;Top 10 Essential Ruby Interview Questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/timurcatakli/ruby-on-rails-interview-questions-answers&quot;&gt;Ruby on Rails Technical Interview Questions&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;[What does&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
          &lt;td&gt;= (or-equals) mean in Ruby?](https://stackoverflow.com/questions/995593/what-does-or-equals-mean-in-ruby)&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;[Please explain nuances of&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
          &lt;td&gt;=](https://groups.google.com/forum/#!topic/comp.lang.ruby/y1Maaqk_Q7c)&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;table&gt;
      &lt;tbody&gt;
        &lt;tr&gt;
          &lt;td&gt;[A short-circuit (&lt;/td&gt;
          &lt;td&gt; &lt;/td&gt;
          &lt;td&gt;=) edge case](http://davidablack.net/dablog.html#2008/3/25/a-short-circuit-edge-case)&lt;/td&gt;
        &lt;/tr&gt;
      &lt;/tbody&gt;
    &lt;/table&gt;
  &lt;/li&gt;
&lt;/ul&gt;</content><author><name></name></author><summary type="html">前情提要:</summary></entry></feed>